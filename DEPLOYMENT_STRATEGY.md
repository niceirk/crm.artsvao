# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ–ø–ª–æ—è –¥–ª—è artsvao

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: **Rolling Update —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏**

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è ‚úÖ
–£ –≤–∞—Å –£–ñ–ï –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∞—è –æ—Å–Ω–æ–≤–∞:
- Docker Compose —Å healthchecks
- Graceful restart —á–µ—Ä–µ–∑ `docker compose up -d`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ nginx
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π downtime (~5-10 —Å–µ–∫—É–Ω–¥)

### –ß—Ç–æ –ù–ï –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å: Blue-Green ‚ùå

#### –ü–æ—á–µ–º—É Blue-Green –∏–∑–±—ã—Ç–æ—á–µ–Ω:

**1. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏**
```
VPS –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É–¥–≤–æ–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å:
- –°–µ–π—á–∞—Å: ~1GB
- –° Blue-Green: ~1.8GB –≤–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è

–†–∏—Å–∫: OOM (Out of Memory) kill
```

**2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**
```
–£ –≤–∞—Å –û–î–ù–ê PostgreSQL –±–∞–∑–∞!

Blue-Green —Ç—Ä–µ–±—É–µ—Ç:
‚îú‚îÄ –û–±—Ä–∞—Ç–Ω–æ-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ –û–±–µ –≤–µ—Ä—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–Ω–æ–π –ë–î
‚îú‚îÄ –ù–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å –∫–æ–ª–æ–Ω–∫–∏ —Å—Ä–∞–∑—É
‚îî‚îÄ –°–ª–æ–∂–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ = 2-3 –¥–µ–ø–ª–æ—è

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –•–æ—á—É –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å "name" –≤ "fullName"  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ Blue-Green –ø—Ä–æ—Ü–µ—Å—Å:                     ‚îÇ
‚îÇ 1. –î–µ–ø–ª–æ–π #1: –î–æ–±–∞–≤–∏—Ç—å fullName         ‚îÇ
‚îÇ    (–æ–±–µ –≤–µ—Ä—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç)                ‚îÇ
‚îÇ 2. –î–µ–ø–ª–æ–π #2: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ         ‚îÇ
‚îÇ 3. –î–µ–ø–ª–æ–π #3: –£–¥–∞–ª–∏—Ç—å name              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**3. Downtime —É–∂–µ –º–∏–Ω–∏–º–∞–ª–µ–Ω**
```
Docker Compose –¥–µ–ª–∞–µ—Ç graceful restart:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Timeline –¥–µ–ø–ª–æ—è:                        ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ 0s  - –°—Ç–∞—Ä—ã–π backend —Ä–∞–±–æ—Ç–∞–µ—Ç           ‚îÇ
‚îÇ 1s  - –ù–æ–≤—ã–π backend —Å—Ç–∞—Ä—Ç—É–µ—Ç            ‚îÇ
‚îÇ 3s  - Healthcheck –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–π       ‚îÇ
‚îÇ 5s  - –ù–æ–≤—ã–π –≥–æ—Ç–æ–≤, —Å—Ç–∞—Ä—ã–π –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ Downtime: ~5 —Å–µ–∫—É–Ω–¥                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–î–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π CRM —ç—Ç–æ –ü–†–ò–ï–ú–õ–ï–ú–û!
```

**4. –°–ª–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
```
Blue-Green —Ç—Ä–µ–±—É–µ—Ç:
- –î–≤–µ –∫–æ–ø–∏–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –î–≤–∞ –Ω–∞–±–æ—Ä–∞ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è nginx
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ (blue/green)
- Cleanup —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

Vs —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:
- docker compose up -d backend
```

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–µ–ø–ª–æ—è (–°–î–ï–õ–ê–ù–û ‚úÖ)

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
bash deploy-smart.sh

–†–µ–∑—É–ª—å—Ç–∞—Ç:
‚îú‚îÄ –ë—ã–ª–æ: 10-15 –º–∏–Ω—É—Ç
‚îî‚îÄ –°—Ç–∞–ª–æ: 1-3 –º–∏–Ω—É—Ç—ã
```

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Docker —Å–ª–æ–µ–≤
- ‚úÖ .dockerignore —Ñ–∞–π–ª—ã
- ‚úÖ –°–µ–ª–µ–∫—Ç–∏–≤–Ω—ã–π –¥–µ–ø–ª–æ–π (—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã)
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ git

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π smoke test –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è (–†–ï–ö–û–ú–ï–ù–î–£–Æ)

–î–æ–±–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –í –∫–æ–Ω—Ü–µ deploy-smart.sh
echo "üß™ Running smoke tests..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ backend health
if ! curl -f http://localhost:3000/api/health > /dev/null 2>&1; then
    echo "‚ùå Backend health check failed!"
    echo "üîÑ Rolling back..."
    docker compose -f docker-compose.prod.yml rollback backend
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend
if ! curl -f http://localhost:3001 > /dev/null 2>&1; then
    echo "‚ùå Frontend health check failed!"
    echo "üîÑ Rolling back..."
    docker compose -f docker-compose.prod.yml rollback frontend
    exit 1
fi

echo "‚úÖ Smoke tests passed!"
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–†–ï–ö–û–ú–ï–ù–î–£–Æ)

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞
docker tag artsvao-backend:latest artsvao-backend:previous

# –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å
if [ $? -ne 0 ]; then
    echo "üîÑ Rolling back to previous version..."
    docker tag artsvao-backend:previous artsvao-backend:latest
    docker compose -f docker-compose.prod.yml up -d backend
fi
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è (–†–ï–ö–û–ú–ï–ù–î–£–Æ)

```bash
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–ø–ª–æ–µ–≤
echo "$(date): Deploy started by $(whoami)" >> /var/log/artsvao-deploy.log

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ
if [ $DEPLOY_SUCCESS = true ]; then
    curl -X POST "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
         -d "chat_id=$CHAT_ID" \
         -d "text=‚úÖ –î–µ–ø–ª–æ–π artsvao —É—Å–ø–µ—à–µ–Ω!"
fi
```

### 5. Graceful shutdown (–£–ñ–ï –ï–°–¢–¨ ‚úÖ)

–í –≤–∞—à–µ–º docker-compose.prod.yml —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
- `restart: unless-stopped`
- healthchecks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- depends_on —Å condition: service_healthy

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ!

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –¢–µ–∫—É—â–∏–π Rolling Update | Blue-Green | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|------------------------|------------|--------------|
| **Downtime** | 5-10 —Å–µ–∫—É–Ω–¥ | 0 —Å–µ–∫—É–Ω–¥ | Rolling –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | Rolling –ø—Ä–æ—â–µ |
| **–†–µ—Å—É—Ä—Å—ã** | 1GB | 1.8GB | Rolling —ç–∫–æ–Ω–æ–º–Ω–µ–µ |
| **–ë–î –º–∏–≥—Ä–∞—Ü–∏–∏** | –ü—Ä–æ—Å—Ç—ã–µ | –°–ª–æ–∂–Ω—ã–µ | Rolling —É–¥–æ–±–Ω–µ–µ |
| **Rollback** | –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | Blue-Green –ª—É—á—à–µ, –ù–û... |
| **–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è** | 1-3 –º–∏–Ω (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ) | 1-3 –º–∏–Ω + –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ | –û–¥–∏–Ω–∞–∫–æ–≤–æ |

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–õ–Ø ARTSVAO –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï:

```bash
Rolling Update + –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

‚úÖ –ß—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:
‚îú‚îÄ Docker Compose —Å healthchecks
‚îú‚îÄ Graceful restart
‚îú‚îÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ (1-3 –º–∏–Ω)
‚îî‚îÄ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

üîß –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:
‚îú‚îÄ Smoke tests –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
‚îú‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
‚îú‚îÄ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–µ–ø–ª–æ—è—Ö
‚îî‚îÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ø–ª–æ–µ–≤
```

### Blue-Green –†–ï–ö–û–ú–ï–ù–î–£–Æ –¢–û–õ–¨–ö–û –µ—Å–ª–∏:
- ‚ùå –£ –≤–∞—Å –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (100+ RPS)
- ‚ùå Downtime –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º (—Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- ‚ùå –ú–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤ (4GB+ RAM)
- ‚ùå –ù–µ—Å–∫–æ–ª—å–∫–æ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞

**–î–ª—è artsvao (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è CRM):**
- ‚úÖ –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ –û–ü–¢–ò–ú–ê–õ–¨–ù–û
- ‚úÖ 5-10 —Å–µ–∫—É–Ω–¥ downtime –ø—Ä–∏–µ–º–ª–µ–º—ã
- ‚úÖ –î–µ–ø–ª–æ–∏ –≤–Ω–µ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: Canary Deployment

–ï—Å–ª–∏ –û–ß–ï–ù–¨ —Ö–æ—á–µ—Ç—Å—è zero downtime, –Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –º–∞–ª–æ:

**Canary = –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ç—Ä–∞—Ñ–∏–∫–∞**

```nginx
upstream backend {
    # 90% —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
    server backend_old:3000 weight=90;

    # 10% —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é (—Ç–µ—Å—Ç–∏—Ä—É–µ–º)
    server backend_new:3000 weight=10;
}
```

–ü—Ä–æ—Ü–µ—Å—Å:
1. –ü–æ–¥–Ω—è—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
2. –ù–∞–ø—Ä–∞–≤–∏—Ç—å 10% —Ç—Ä–∞—Ñ–∏–∫–∞
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
4. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –¥–æ 100%
5. –£–±–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é

**–ù–æ –¥–ª—è artsvao —ç—Ç–æ –¢–û–ñ–ï –∏–∑–±—ã—Ç–æ—á–Ω–æ!**

## üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:
- [ ] –ó–∞–∫–æ–º–º–∏—Ç–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
- [ ] –ü—Ä–æ–≥–Ω–∞–ª —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –û–±–Ω–æ–≤–∏–ª .env.production –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- [ ] –í—ã–±—Ä–∞–ª –≤—Ä–µ–º—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é

### –î–µ–ø–ª–æ–π:
```bash
# 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É–º–Ω—ã–π –¥–µ–ø–ª–æ–π
bash deploy-smart.sh

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
ssh root@109.196.102.90 'docker compose logs -f backend'

# 3. Smoke test –≤—Ä—É—á–Ω—É—é
curl https://crm.artsvao.ru/api/health

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ UI
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
```

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:
```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
ssh root@109.196.102.90
cd /opt/artsvao

# –ù–∞–π—Ç–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–±—Ä–∞–∑
docker images | grep artsvao-backend

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è
docker tag artsvao-backend:<previous-tag> artsvao-backend:latest
docker compose -f docker-compose.prod.yml up -d backend
```

## üéì –ö–æ–≥–¥–∞ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ Blue-Green/Canary –¢–û–õ–¨–ö–û –µ—Å–ª–∏:

1. **–ú–∞—Å—à—Ç–∞–± –≤—ã—Ä–æ—Å:**
   - 1000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –≤–æ–∑—Ä–æ—Å–ª–∞

2. **–†–µ—Å—É—Ä—Å—ã –ø–æ—è–≤–∏–ª–∏—Å—å:**
   - –ê–ø–≥—Ä–µ–π–¥ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ 4GB+ RAM
   - –ò–ª–∏ –ø–µ—Ä–µ–µ–∑–¥ –Ω–∞ Kubernetes

3. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å:**
   - Zero downtime —Å—Ç–∞–ª –∫—Ä–∏—Ç–∏—á–µ–Ω
   - SLA —Ç—Ä–µ–±—É–µ—Ç 99.99% uptime

**–°–µ–π—á–∞—Å: Rolling Update —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ = –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è artsvao** ‚úÖ

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-23
**–ê–≤—Ç–æ—Ä:** Claude Code Agent + AI –∞–Ω–∞–ª–∏–∑
