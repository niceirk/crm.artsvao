# –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–î–∞—Ç–∞:** 19 –Ω–æ—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** –≠–¢–ê–ü 1 –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ 95%, —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–ª–∞–¥–∫–∞

---

## ‚úÖ –≠–¢–ê–ü 1: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (95% –∑–∞–≤–µ—Ä—à–µ–Ω)

### Backend (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

#### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–§–∞–π–ª:** `backend/prisma/schema.prisma:19`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `avatarUrl String? @map("avatar_url")`
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è:** `backend/prisma/migrations/20251119141931_add_avatar_url_to_user/migration.sql`
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
  - Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

#### 2. DTOs
- ‚úÖ `backend/src/users/dto/update-profile.dto.ts` - –≤–∞–ª–∏–¥–∞—Ü–∏—è firstName/lastName
- ‚úÖ `backend/src/users/dto/change-password.dto.ts` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ `backend/src/users/dto/user-response.dto.ts` - —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
- ‚úÖ `backend/src/users/dto/index.ts` - —ç–∫—Å–ø–æ—Ä—Ç

#### 3. Service
**–§–∞–π–ª:** `backend/src/users/users.service.ts`

–ú–µ—Ç–æ–¥—ã:
- ‚úÖ `findById(userId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- ‚úÖ `updateProfile(userId, dto)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏/—Ñ–∞–º–∏–ª–∏–∏
- ‚úÖ `changePassword(userId, dto)` - —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–∞—Ä–æ–≥–æ
- ‚úÖ `uploadAvatar(userId, filename)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ URL –∞–≤–∞—Ç–∞—Ä–∞
- ‚úÖ `deleteAvatar(userId)` - —É–¥–∞–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- PrismaService –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- bcrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π

#### 4. Controller
**–§–∞–π–ª:** `backend/src/users/users.controller.ts`

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- ‚úÖ `GET /api/users/me` - –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å
- ‚úÖ `PATCH /api/users/me` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- ‚úÖ `PATCH /api/users/me/password` - —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
- ‚úÖ `POST /api/users/me/avatar` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä (max 5MB, jpeg/png/gif/webp)
- ‚úÖ `DELETE /api/users/me/avatar` - —É–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ó–∞—â–∏—â–µ–Ω–æ `JwtAuthGuard`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `FileInterceptor` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- Multer –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ `backend/uploads/avatars/`
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ (5MB) –∏ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞

#### 5. Module
**–§–∞–π–ª:** `backend/src/users/users.module.ts`
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `PrismaModule`
- ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ `backend/src/app.module.ts:46`

#### 6. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `backend/uploads/avatars/` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ **–†–∞–∑–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤:** `backend/src/main.ts:10-13` –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ `useStaticAssets`
- ‚úÖ **–¢–∏–ø—ã:** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `@types/multer`

### Frontend (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

#### 1. –¢–∏–ø—ã
**–§–∞–π–ª:** `frontend/lib/types/auth.ts:1-12`
```typescript
interface User {
  id: string;
  email: string;
  firstName: string;
  lastName: string;
  role: 'ADMIN' | 'MANAGER';
  status: 'ACTIVE' | 'BLOCKED';
  avatarUrl: string | null;        // –î–æ–±–∞–≤–ª–µ–Ω–æ
  lastLoginAt: string | null;      // –î–æ–±–∞–≤–ª–µ–Ω–æ
  createdAt: string;                // –î–æ–±–∞–≤–ª–µ–Ω–æ
  updatedAt: string;                // –î–æ–±–∞–≤–ª–µ–Ω–æ
}
```

#### 2. API –∫–ª–∏–µ–Ω—Ç
**–§–∞–π–ª:** `frontend/lib/api/users.ts`

–§—É–Ω–∫—Ü–∏–∏:
- ‚úÖ `getMyProfile()` - GET /users/me
- ‚úÖ `updateMyProfile(data)` - PATCH /users/me
- ‚úÖ `changePassword(data)` - PATCH /users/me/password
- ‚úÖ `uploadAvatar(file)` - POST /users/me/avatar —Å FormData
- ‚úÖ `deleteAvatar()` - DELETE /users/me/avatar

#### 3. –•—É–∫
**–§–∞–π–ª:** `frontend/hooks/use-profile.ts`

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ TanStack Query –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ú—É—Ç–∞—Ü–∏–∏: updateProfile, changePassword, uploadAvatar, deleteAvatar
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `auth-store.setUser()`
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (sonner)
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –º—É—Ç–∞—Ü–∏–∏

#### 4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è
**–§–∞–π–ª:** `frontend/app/(dashboard)/profile/page.tsx`

–°–µ–∫—Ü–∏–∏:
- ‚úÖ –ê–≤–∞—Ç–∞—Ä —Å –ø—Ä–µ–≤—å—é –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π/—É–¥–∞–ª–µ–Ω–∏–µ–º
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: email, —Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å, –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥, –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω–∏/—Ñ–∞–º–∏–ª–∏–∏ (React Hook Form + Zod)
- ‚úÖ –§–æ—Ä–º–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- ‚úÖ Skeleton loaders –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω (Grid, Card)

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:
- Card, CardHeader, CardTitle, CardDescription, CardContent
- Input, Label, Button
- Avatar, AvatarImage, AvatarFallback
- Badge, Skeleton
- –ò–∫–æ–Ω–∫–∏: Upload, Trash2, Loader2

#### 5. –ù–∞–≤–∏–≥–∞—Ü–∏—è
**–§–∞–π–ª:** `frontend/components/navigation/user-nav.tsx:33-41`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `AvatarImage` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞
- ‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å —É–∂–µ –±—ã–ª–∞ (—Å—Ç—Ä–æ–∫–∞ 63-67)

---

## ‚úÖ –≠–¢–ê–ü 1 –ó–ê–í–ï–†–®–ï–ù

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ—à–∏–±–∫–æ–π 500 —Ä–µ—à–µ–Ω–∞** - –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ backend —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## ‚úÖ –≠–¢–ê–ü 2: –ê–¥–º–∏–Ω-—Ä–∞–∑–¥–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - –ó–ê–í–ï–†–®–ï–ù

### Backend (100% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

**DTOs –¥–ª—è –∞–¥–º–∏–Ω–∞:**
- ‚úÖ `backend/src/users/dto/users-filter.dto.ts` - —Ñ–∏–ª—å—Ç—Ä—ã (role, status, search, page, limit)
- ‚úÖ `backend/src/users/dto/create-invite.dto.ts` - email, firstName, lastName, role
- ‚úÖ `backend/src/users/dto/update-user-status.dto.ts` - status: ACTIVE | BLOCKED
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ `backend/src/users/dto/index.ts`

**Service –º–µ—Ç–æ–¥—ã:**
‚úÖ `backend/src/users/users.service.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- `findAll(filters)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `createInvite(dto)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (—Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º, —Å—Ç–∞—Ç—É—Å BLOCKED)
- `updateStatus(userId, dto)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `remove(userId, currentUserId)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π

**Controller —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
‚úÖ `backend/src/users/users.controller.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ADMIN only, —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `POST /users/invite` - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ (ADMIN only)
- `PATCH /users/:id/status` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å (ADMIN only)
- `DELETE /users/:id` - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ADMIN only)

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã `@UseGuards(RolesGuard)` –∏ `@Roles('ADMIN')`

### Frontend (100% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

**API –∫–ª–∏–µ–Ω—Ç:**
‚úÖ `frontend/lib/api/users.ts` —Ä–∞—Å—à–∏—Ä–µ–Ω:
- `getUsers(filters)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `createInvite(data)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `updateUserStatus(userId, data)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `deleteUser(userId)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: `UsersFilterParams`, `CreateInviteDto`, `UpdateUserStatusDto`, `UsersListResponse`, `InviteResponse`

**–•—É–∫:**
‚úÖ `frontend/hooks/use-users.ts` - TanStack Query —Ö—É–∫–∏:
- `useUsers(filters)` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞
- `useCreateInvite()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `useUpdateUserStatus()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `useDeleteUser()` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –∏ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
‚úÖ `frontend/app/(dashboard)/users/page.tsx`:
- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏
- –ö–æ–ª–æ–Ω–∫–∏: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –†–æ–ª—å, –°—Ç–∞—Ç—É—Å, –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥, –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –î–µ–π—Å—Ç–≤–∏—è
- –§–∏–ª—å—Ç—Ä—ã: –ø–æ–∏—Å–∫, —Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥)
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
- Skeleton –∑–∞–≥—Ä—É–∑—á–∏–∫–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç (date-fns + ru locale)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
‚úÖ `frontend/app/(dashboard)/users/components/invite-dialog.tsx`:
- Dialog —Å —Ñ–æ—Ä–º–æ–π (email, firstName, lastName, role)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ React Hook Form + Zod
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ invite link
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π UI (—Ñ–æ—Ä–º–∞ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

‚úÖ `frontend/app/(dashboard)/users/components/user-actions.tsx`:
- DropdownMenu —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)
- –£–¥–∞–ª–∏—Ç—å —Å AlertDialog –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ö—É–∫–∞–º–∏

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `frontend/lib/config/navigation.ts`:
```typescript
{
  title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
  href: '/users',
  icon: Users,
  description: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã',
  requiresAdmin: true,
}
```
–í —Ä–∞–∑–¥–µ–ª–µ "–°–∏—Å—Ç–µ–º–∞", –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è ADMIN

---

## üìã TODO: –≠–¢–ê–ü 3 - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –†–µ–¥–∏–∑–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞

- [ ] `frontend/app/(auth)/login/page.tsx`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Card –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø (`frontend/components/logo.tsx`)
  - –£–ª—É—á—à–∏—Ç—å —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫—É –∏ spacing
  - –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (framer-motion –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - Skeleton –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

**Backend:**
- [ ] `backend/src/auth/dto/forgot-password.dto.ts`
- [ ] `backend/src/auth/dto/reset-password.dto.ts`
- [ ] `backend/src/auth/auth.service.ts`:
  ```typescript
  async forgotPassword(email: string) {
    // –°–æ–∑–¥–∞—Ç—å PasswordResetToken
    // TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å email —Å —Ç–æ–∫–µ–Ω–æ–º
    // –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 1 —á–∞—Å
  }

  async resetPassword(token: string, newPassword: string) {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω
    // –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
    // –ü–æ–º–µ—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π
  }
  ```

- [ ] `backend/src/auth/auth.controller.ts`:
  ```typescript
  @Post('forgot-password') // POST /auth/forgot-password
  @Public()
  async forgotPassword(@Body() dto: ForgotPasswordDto) {}

  @Post('reset-password') // POST /auth/reset-password
  @Public()
  async resetPassword(@Body() dto: ResetPasswordDto) {}
  ```

**Frontend:**
- [ ] `frontend/app/(auth)/forgot-password/page.tsx`
  - –§–æ—Ä–º–∞ —Å email
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å—å–º–∞

- [ ] `frontend/app/(auth)/reset-password/page.tsx`
  - –§–æ—Ä–º–∞ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
  - –ü–æ–ª—É—á–µ–Ω–∏–µ token –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `frontend/app/(auth)/login/page.tsx`:
  - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"

---

## üìÇ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
```
backend/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îÇ   ‚îî‚îÄ‚îÄ migrations/20251119141931_add_avatar_url_to_user/
‚îÇ       ‚îî‚îÄ‚îÄ migration.sql
‚îú‚îÄ‚îÄ uploads/avatars/ (—Å–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ main.ts (–æ–±–Ω–æ–≤–ª–µ–Ω: —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏)
    ‚îî‚îÄ‚îÄ users/
        ‚îú‚îÄ‚îÄ dto/
        ‚îÇ   ‚îú‚îÄ‚îÄ index.ts (–æ–±–Ω–æ–≤–ª–µ–Ω)
        ‚îÇ   ‚îú‚îÄ‚îÄ update-profile.dto.ts
        ‚îÇ   ‚îú‚îÄ‚îÄ change-password.dto.ts
        ‚îÇ   ‚îú‚îÄ‚îÄ user-response.dto.ts
        ‚îÇ   ‚îú‚îÄ‚îÄ users-filter.dto.ts (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
        ‚îÇ   ‚îú‚îÄ‚îÄ create-invite.dto.ts (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
        ‚îÇ   ‚îî‚îÄ‚îÄ update-user-status.dto.ts (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
        ‚îú‚îÄ‚îÄ users.module.ts (–æ–±–Ω–æ–≤–ª–µ–Ω)
        ‚îú‚îÄ‚îÄ users.service.ts (—Ä–∞—Å—à–∏—Ä–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã)
        ‚îî‚îÄ‚îÄ users.controller.ts (—Ä–∞—Å—à–∏—Ä–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
```

### Frontend
```
frontend/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.ts (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.ts (—Ä–∞—Å—à–∏—Ä–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã)
‚îÇ   ‚îî‚îÄ‚îÄ config/
‚îÇ       ‚îî‚îÄ‚îÄ navigation.ts (–æ–±–Ω–æ–≤–ª–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏")
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-profile.ts (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 1)
‚îÇ   ‚îî‚îÄ‚îÄ use-users.ts (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ navigation/
‚îÇ       ‚îî‚îÄ‚îÄ user-nav.tsx (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ (dashboard)/
        ‚îú‚îÄ‚îÄ profile/
        ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 1)
        ‚îî‚îÄ‚îÄ users/
            ‚îú‚îÄ‚îÄ page.tsx (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
            ‚îî‚îÄ‚îÄ components/
                ‚îú‚îÄ‚îÄ invite-dialog.tsx (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
                ‚îî‚îÄ‚îÄ user-actions.tsx (—Å–æ–∑–¥–∞–Ω - –≠–¢–ê–ü 2)
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

```bash
# Backend
cd /home/nikita/artsvao/backend
npm run start:dev

# Frontend (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd /home/nikita/artsvao/frontend
npm run dev
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è (–≠–¢–ê–ü 1):**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin@artsvao.ru / admin123
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å (–∏–∫–æ–Ω–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –ü—Ä–æ—Ñ–∏–ª—å)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏/—Ñ–∞–º–∏–ª–∏–∏
   - –°–º–µ–Ω—É –ø–∞—Ä–æ–ª—è
   - –ó–∞–≥—Ä—É–∑–∫—É –∞–≤–∞—Ç–∞—Ä–∞

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≠–¢–ê–ü 2):**
1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—é (–ø–æ–∏—Å–∫, —Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å)
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (–∫–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
   - –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ)

### 3. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
TOKEN=$(curl -s -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@artsvao.ru","password":"admin123"}' \
  | jq -r '.accessToken')

# –≠–¢–ê–ü 1 - –ü—Ä–æ—Ñ–∏–ª—å
# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:3000/api/users/me | jq

# –≠–¢–ê–ü 2 - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
# –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl -H "Authorization: Bearer $TOKEN" \
  "http://localhost:3000/api/users?page=1&limit=10" | jq

# –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
curl -X POST -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","firstName":"–¢–µ—Å—Ç","lastName":"–¢–µ—Å—Ç–æ–≤","role":"MANAGER"}' \
  http://localhost:3000/api/users/invite | jq
```

---

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

- ‚úÖ –≠–¢–ê–ü 1: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è - **100% –ó–ê–í–ï–†–®–ï–ù**
- ‚úÖ –≠–¢–ê–ü 2: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - **100% –ó–ê–í–ï–†–®–ï–ù**
- ‚è≥ –≠–¢–ê–ü 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - **0% (–≥–æ—Ç–æ–≤ –∫ –Ω–∞—á–∞–ª—É)**

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –≠–¢–ê–ü–´ 1 –∏ 2 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω—ã. –ì–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É –≠–¢–ê–ü–ê 3.

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

**–≠–¢–ê–ü 1 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–≠–¢–ê–ü 2 - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
- Backend API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (CRUD)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Frontend —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å –≠–¢–ê–ü 3 - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
