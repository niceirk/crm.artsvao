# ะะพะดัะปั ะะฐัะฟะธัะฐะฝะธั ะธ ะัะพะฝะธัะพะฒะฐะฝะธั

**ะะตััะธั:** 1.0
**ะะฐัะฐ:** 2025-11-13
**ะกัะฐััั:** ะะตัะฐะปัะฝะฐั ัะฟะตัะธัะธะบะฐัะธั

---

## ะกะพะดะตัะถะฐะฝะธะต

1. [ะะฑะทะพั ะผะพะดัะปั](#ะพะฑะทะพั-ะผะพะดัะปั)
2. [ะกัััะบัััะฐ ะดะฐะฝะฝัั](#ััััะบัััะฐ-ะดะฐะฝะฝัั)
3. [ะขะธะฟั ัะพะฑััะธะน ะฒ ัะฐัะฟะธัะฐะฝะธะธ](#ัะธะฟั-ัะพะฑััะธะน-ะฒ-ัะฐัะฟะธัะฐะฝะธะธ)
4. [ะกะบะฒะพะทะฝะพะต ัะฐัะฟะธัะฐะฝะธะต](#ัะบะฒะพะทะฝะพะต-ัะฐัะฟะธัะฐะฝะธะต)
5. [ะกะพะทะดะฐะฝะธะต ะทะฐะฝััะธะน](#ัะพะทะดะฐะฝะธะต-ะทะฐะฝััะธะน)
6. [ะะพะฒัะพััััะธะตัั ะทะฐะฝััะธั](#ะฟะพะฒัะพััััะธะตัั-ะทะฐะฝััะธั)
7. [ะัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธะน](#ะฐัะตะฝะดะฐ-ะฟะพะผะตัะตะฝะธะน)
8. [ะะตัะพะฟัะธััะธั](#ะผะตัะพะฟัะธััะธั)
9. [ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ](#ัะตัะฝะธัะตัะบะธะต-ะฑัะพะฝะธ)
10. [ะัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ](#ะฟัะพะฒะตัะบะฐ-ะบะพะฝัะปะธะบัะพะฒ)
11. [ะัะผะตะฝะฐ ะธ ะฟะตัะตะฝะพั](#ะพัะผะตะฝะฐ-ะธ-ะฟะตัะตะฝะพั)
12. [ะฃะฒะตะดะพะผะปะตะฝะธั](#ัะฒะตะดะพะผะปะตะฝะธั)
13. [ะคะธะปัััั ะธ ะฟัะตะดััะฐะฒะปะตะฝะธั](#ัะธะปัััั-ะธ-ะฟัะตะดััะฐะฒะปะตะฝะธั)
14. [ะัะฐะฒะฐ ะดะพัััะฟะฐ](#ะฟัะฐะฒะฐ-ะดะพัััะฟะฐ)
15. [UI/UX ััะตะฑะพะฒะฐะฝะธั](#uiux-ััะตะฑะพะฒะฐะฝะธั)
16. [ะะทะฐะธะผะพะดะตะนััะฒะธะต ั ะดััะณะธะผะธ ะผะพะดัะปัะผะธ](#ะฒะทะฐะธะผะพะดะตะนััะฒะธะต-ั-ะดััะณะธะผะธ-ะผะพะดัะปัะผะธ)
17. [API Endpoints](#api-endpoints)
18. [ะะพะดัะปั ะะปะฐะฝะธัะพะฒัะธะบะฐ ัะฐัะฟะธัะฐะฝะธั](#ะผะพะดัะปั-ะฟะปะฐะฝะธัะพะฒัะธะบะฐ-ัะฐัะฟะธัะฐะฝะธั)

---

## 1. ะะฑะทะพั ะผะพะดัะปั

### 1.1. ะะฐะทะฝะฐัะตะฝะธะต

ะะพะดัะปั ัะฐัะฟะธัะฐะฝะธั ะพะฑะตัะฟะตัะธะฒะฐะตั ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ะฒัะตะผะธ ัะพะฑััะธัะผะธ ะบัะปััััะฝะพะณะพ ัะตะฝััะฐ ะฒ ะตะดะธะฝะพะผ ะฒัะตะผะตะฝะฝะพะผ ะฟัะตะดััะฐะฒะปะตะฝะธะธ. ะญัะพ ะบะปััะตะฒะพะน ะผะพะดัะปั, ะบะพัะพััะน ะบะพะพัะดะธะฝะธััะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะพะผะตัะตะฝะธะน, ัะฐะฑะพัั ะฟัะตะฟะพะดะฐะฒะฐัะตะปะตะน ะธ ะพะฑัะปัะถะธะฒะฐะฝะธะต ะบะปะธะตะฝัะพะฒ.

### 1.2. ะะธะทะฝะตั-ัะตะปะธ

- ะญััะตะบัะธะฒะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะพะผะตัะตะฝะธะน (ะธะทะฑะตะถะฐะฝะธะต ะฟัะพััะพะตะฒ)
- ะัะตะดะพัะฒัะฐัะตะฝะธะต ะบะพะฝัะปะธะบัะพะฒ ะฑัะพะฝะธัะพะฒะฐะฝะธั
- ะัะพะทัะฐัะฝะพััั ัะฐัะฟะธัะฐะฝะธั ะดะปั ัะพัััะดะฝะธะบะพะฒ
- ะะฒัะพะผะฐัะธะทะฐัะธั ัะพะทะดะฐะฝะธั ัะตะณัะปััะฝัั ะทะฐะฝััะธะน
- ะฃัะตั ะฐัะตะฝะดั ะดะปั ะฒะฝะตัะฝะธั ะบะปะธะตะฝัะพะฒ
- ะะฟะตัะฐัะธะฒะฝะพะต ะธะฝัะพัะผะธัะพะฒะฐะฝะธะต ะพะฑ ะธะทะผะตะฝะตะฝะธัั

### 1.3. ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

- ะกะบะฒะพะทะฝะพะต ัะฐัะฟะธัะฐะฝะธะต (ะฒัะต ัะธะฟั ัะพะฑััะธะน ะฒ ะพะดะฝะพะผ ะผะตััะต)
- ะกะพะทะดะฐะฝะธะต ัะฐะทะพะฒัั ะธ ะฟะพะฒัะพััััะธััั ะทะฐะฝััะธะน
- ะัะฐัะบะพััะพัะฝะฐั ะฐัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธะน
- ะะปะฐะฝะธัะพะฒะฐะฝะธะต ะผะตัะพะฟัะธััะธะน
- ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ
- ะัะผะตะฝะฐ ะธ ะฟะตัะตะฝะพั ัะพะฑััะธะน
- Email-ัะฒะตะดะพะผะปะตะฝะธั ะพะฑ ะธะทะผะตะฝะตะฝะธัั

---

## 2. ะกัััะบัััะฐ ะดะฐะฝะฝัั

### 2.1. ะขะฐะฑะปะธัะฐ Schedule (ะะฐัะฟะธัะฐะฝะธะต ะทะฐะฝััะธะน)

```sql
CREATE TABLE schedules (
  id                UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  group_id          UUID REFERENCES groups(id),
  teacher_id        UUID NOT NULL REFERENCES teachers(id),
  room_id           UUID NOT NULL REFERENCES rooms(id),
  date              DATE NOT NULL,
  start_time        TIME NOT NULL,
  end_time          TIME NOT NULL,
  type              VARCHAR(20) NOT NULL, -- 'group' | 'individual'
  is_recurring      BOOLEAN DEFAULT FALSE,
  recurrence_rule   TEXT, -- ะัะฐะฒะธะปะพ ะฟะพะฒัะพัะตะฝะธั (ะดะฝะธ ะฝะตะดะตะปะธ, ะดะพ ะบะฐะบะพะน ะดะฐัั)
  recurrence_end_date DATE,
  parent_schedule_id UUID REFERENCES schedules(id), -- ะกััะปะบะฐ ะฝะฐ ัะพะดะธัะตะปััะบะพะต ัะฐัะฟะธัะฐะฝะธะต ะดะปั ะฟะพะฒัะพัะพะฒ
  status            VARCHAR(20) DEFAULT 'scheduled', -- 'scheduled' | 'completed' | 'cancelled'
  cancellation_reason TEXT,
  notes             TEXT,
  created_at        TIMESTAMP DEFAULT NOW(),
  updated_at        TIMESTAMP DEFAULT NOW(),
  created_by        UUID REFERENCES users(id)
);

CREATE INDEX idx_schedules_date ON schedules(date);
CREATE INDEX idx_schedules_room ON schedules(room_id);
CREATE INDEX idx_schedules_teacher ON schedules(teacher_id);
CREATE INDEX idx_schedules_group ON schedules(group_id);
CREATE INDEX idx_schedules_date_room ON schedules(date, room_id);
CREATE INDEX idx_schedules_status ON schedules(status);
CREATE INDEX idx_schedules_parent ON schedules(parent_schedule_id);
```

**ะะฐะถะฝะพ:** ะขะฐะฑะปะธัะฐ `schedules` ะธัะฟะพะปัะทัะตััั ะดะปั ะะะะฃะะฏะะะซะฅ ะทะฐะฝััะธะน (ะบะฐะบ ะณััะฟะฟะพะฒัั, ัะฐะบ ะธ ะธะฝะดะธะฒะธะดัะฐะปัะฝัั),
ะบะพัะพััะต ะฟัะพัะพะดัั ะฒ ัะฐะผะบะฐั ัะธััะตะผั ะฐะฑะพะฝะตะผะตะฝัะพะฒ. ะะปั ัะฐะทะพะฒัั ะฟะปะฐัะฝัั ะธะฝะดะธะฒะธะดัะฐะปัะฝัั ะทะฐะฝััะธะน
ะะะ ัะธััะตะผั ะฐะฑะพะฝะตะผะตะฝัะพะฒ ะธัะฟะพะปัะทัะตััั ะพัะดะตะปัะฝะฐั ัะฐะฑะปะธัะฐ `individual_lessons` (ัะผ. ะะพะดัะปั ะกััะดะธะน).

### 2.2. ะขะฐะฑะปะธัะฐ Rental (ะัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธะน)

```sql
CREATE TABLE rentals (
  id              UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  room_id         UUID NOT NULL REFERENCES rooms(id),
  client_id       UUID REFERENCES clients(id), -- ะะฟัะธะพะฝะฐะปัะฝะฐั ัะฒัะทั ั ะบะปะธะตะฝัะพะผ ะธะท ะฑะฐะทั
  client_name     VARCHAR(255) NOT NULL,
  client_phone    VARCHAR(20) NOT NULL,
  client_email    VARCHAR(255),
  event_type      VARCHAR(100), -- ะขะธะฟ ะผะตัะพะฟัะธััะธั (ะดะตะฝั ัะพะถะดะตะฝะธั, ัะตะผะธะฝะฐั ะธ ั.ะด.)
  date            DATE NOT NULL,
  start_time      TIME NOT NULL,
  end_time        TIME NOT NULL,
  expected_guests INTEGER,
  additional_services TEXT, -- ะะพะฟ. ััะปัะณะธ (ะพะฑะพััะดะพะฒะฐะฝะธะต, ะบะตะนัะตัะธะฝะณ)
  calculated_price DECIMAL(10,2), -- ะะฒัะพะผะฐัะธัะตัะบะธ ัะฐัััะธัะฐะฝะฝะฐั ัะตะฝะฐ
  total_price     DECIMAL(10,2) NOT NULL, -- ะัะพะณะพะฒะฐั ัะตะฝะฐ (ะผะพะถะตั ะฑััั ะธะทะผะตะฝะตะฝะฐ ะฒัััะฝัั)
  status          VARCHAR(20) DEFAULT 'request', -- 'request' | 'confirmed' | 'paid' | 'completed' | 'cancelled'
  manager_id      UUID REFERENCES users(id), -- ะัะพ ะพัะพัะผะธะป
  cancellation_policy TEXT, -- ะัะฐะฒะธะปะฐ ะพัะผะตะฝั
  cancelled_at    TIMESTAMP,
  cancellation_reason TEXT,
  refund_amount   DECIMAL(10,2),
  notes           TEXT,
  created_at      TIMESTAMP DEFAULT NOW(),
  updated_at      TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_rentals_date ON rentals(date);
CREATE INDEX idx_rentals_room ON rentals(room_id);
CREATE INDEX idx_rentals_client ON rentals(client_id);
CREATE INDEX idx_rentals_status ON rentals(status);
CREATE INDEX idx_rentals_manager ON rentals(manager_id);
CREATE INDEX idx_rentals_date_room ON rentals(date, room_id);
```

### 2.3. ะขะฐะฑะปะธัะฐ Event (ะะตัะพะฟัะธััะธั)

```sql
CREATE TABLE events (
  id                  UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name                VARCHAR(255) NOT NULL,
  description         TEXT,
  event_type          VARCHAR(100), -- ะขะธะฟ ะผะตัะพะฟัะธััะธั
  date                DATE NOT NULL,
  start_time          TIME NOT NULL,
  end_time            TIME NOT NULL,
  room_ids            UUID[] NOT NULL, -- ะะฐััะธะฒ ID ะฟะพะผะตัะตะฝะธะน
  max_capacity        INTEGER,
  responsible_user_id UUID REFERENCES users(id),
  photo_url           VARCHAR(255),
  status              VARCHAR(20) DEFAULT 'scheduled', -- 'scheduled' | 'completed' | 'cancelled'
  notes               TEXT,
  created_at          TIMESTAMP DEFAULT NOW(),
  updated_at          TIMESTAMP DEFAULT NOW(),
  created_by          UUID REFERENCES users(id)
);

CREATE INDEX idx_events_date ON events(date);
CREATE INDEX idx_events_status ON events(status);
CREATE INDEX idx_events_responsible ON events(responsible_user_id);
```

### 2.4. ะขะฐะฑะปะธัะฐ TechnicalBlock (ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ)

```sql
CREATE TABLE technical_blocks (
  id          UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  room_id     UUID NOT NULL REFERENCES rooms(id),
  title       VARCHAR(255) NOT NULL, -- ะะฐะฟัะธะผะตั: "ะะตะผะพะฝั", "ะฃะฑะพัะบะฐ", "ะะฑัะปัะถะธะฒะฐะฝะธะต"
  description TEXT,
  date        DATE NOT NULL,
  start_time  TIME NOT NULL,
  end_time    TIME NOT NULL,
  responsible_user_id UUID REFERENCES users(id),
  created_at  TIMESTAMP DEFAULT NOW(),
  created_by  UUID REFERENCES users(id)
);

CREATE INDEX idx_technical_blocks_date ON technical_blocks(date);
CREATE INDEX idx_technical_blocks_room ON technical_blocks(room_id);
CREATE INDEX idx_technical_blocks_date_room ON technical_blocks(date, room_id);
```

### 2.5. Prisma Schema (ััะฐะณะผะตะฝัั)

```prisma
enum ScheduleType {
  GROUP
  INDIVIDUAL
}

enum ScheduleStatus {
  SCHEDULED
  COMPLETED
  CANCELLED
}

model Schedule {
  id                  String          @id @default(uuid())
  groupId             String?         @map("group_id")
  teacherId           String          @map("teacher_id")
  roomId              String          @map("room_id")
  date                DateTime        @db.Date
  startTime           DateTime        @map("start_time") @db.Time
  endTime             DateTime        @map("end_time") @db.Time
  type                ScheduleType
  isRecurring         Boolean         @default(false) @map("is_recurring")
  recurrenceRule      String?         @map("recurrence_rule") @db.Text
  recurrenceEndDate   DateTime?       @map("recurrence_end_date") @db.Date
  parentScheduleId    String?         @map("parent_schedule_id")
  status              ScheduleStatus  @default(SCHEDULED)
  cancellationReason  String?         @map("cancellation_reason") @db.Text
  notes               String?         @db.Text
  createdAt           DateTime        @default(now()) @map("created_at")
  updatedAt           DateTime        @updatedAt @map("updated_at")
  createdBy           String?         @map("created_by")

  group               Group?          @relation(fields: [groupId], references: [id])
  teacher             Teacher         @relation(fields: [teacherId], references: [id])
  room                Room            @relation(fields: [roomId], references: [id])
  parentSchedule      Schedule?       @relation("ScheduleRecurrence", fields: [parentScheduleId], references: [id])
  childSchedules      Schedule[]      @relation("ScheduleRecurrence")
  creator             User?           @relation(fields: [createdBy], references: [id])
  attendances         Attendance[]

  @@index([date])
  @@index([roomId])
  @@index([teacherId])
  @@index([groupId])
  @@index([date, roomId])
  @@index([status])
  @@index([parentScheduleId])
  @@map("schedules")
}

enum RentalStatus {
  REQUEST
  CONFIRMED
  PAID
  COMPLETED
  CANCELLED
}

model Rental {
  id                  String        @id @default(uuid())
  roomId              String        @map("room_id")
  clientId            String?       @map("client_id")
  clientName          String        @map("client_name") @db.VarChar(255)
  clientPhone         String        @map("client_phone") @db.VarChar(20)
  clientEmail         String?       @map("client_email") @db.VarChar(255)
  eventType           String?       @map("event_type") @db.VarChar(100)
  date                DateTime      @db.Date
  startTime           DateTime      @map("start_time") @db.Time
  endTime             DateTime      @map("end_time") @db.Time
  expectedGuests      Int?          @map("expected_guests")
  additionalServices  String?       @map("additional_services") @db.Text
  calculatedPrice     Decimal?      @map("calculated_price") @db.Decimal(10, 2)
  totalPrice          Decimal       @map("total_price") @db.Decimal(10, 2)
  status              RentalStatus  @default(REQUEST)
  managerId           String?       @map("manager_id")
  cancellationPolicy  String?       @map("cancellation_policy") @db.Text
  cancelledAt         DateTime?     @map("cancelled_at")
  cancellationReason  String?       @map("cancellation_reason") @db.Text
  refundAmount        Decimal?      @map("refund_amount") @db.Decimal(10, 2)
  notes               String?       @db.Text
  createdAt           DateTime      @default(now()) @map("created_at")
  updatedAt           DateTime      @updatedAt @map("updated_at")

  room                Room          @relation(fields: [roomId], references: [id])
  client              Client?       @relation(fields: [clientId], references: [id])
  manager             User?         @relation(fields: [managerId], references: [id])
  payments            Payment[]

  @@index([date])
  @@index([roomId])
  @@index([clientId])
  @@index([status])
  @@index([managerId])
  @@index([date, roomId])
  @@map("rentals")
}

enum EventStatus {
  SCHEDULED
  COMPLETED
  CANCELLED
}

model Event {
  id                  String       @id @default(uuid())
  name                String       @db.VarChar(255)
  description         String?      @db.Text
  eventType           String?      @map("event_type") @db.VarChar(100)
  date                DateTime     @db.Date
  startTime           DateTime     @map("start_time") @db.Time
  endTime             DateTime     @map("end_time") @db.Time
  roomIds             String[]     @map("room_ids")
  maxCapacity         Int?         @map("max_capacity")
  responsibleUserId   String?      @map("responsible_user_id")
  photoUrl            String?      @map("photo_url") @db.VarChar(255)
  status              EventStatus  @default(SCHEDULED)
  notes               String?      @db.Text
  createdAt           DateTime     @default(now()) @map("created_at")
  updatedAt           DateTime     @updatedAt @map("updated_at")
  createdBy           String?      @map("created_by")

  responsibleUser     User?        @relation("ResponsibleEvents", fields: [responsibleUserId], references: [id])
  creator             User?        @relation("CreatedEvents", fields: [createdBy], references: [id])

  @@index([date])
  @@index([status])
  @@index([responsibleUserId])
  @@map("events")
}

model TechnicalBlock {
  id                  String    @id @default(uuid())
  roomId              String    @map("room_id")
  title               String    @db.VarChar(255)
  description         String?   @db.Text
  date                DateTime  @db.Date
  startTime           DateTime  @map("start_time") @db.Time
  endTime             DateTime  @map("end_time") @db.Time
  responsibleUserId   String?   @map("responsible_user_id")
  createdAt           DateTime  @default(now()) @map("created_at")
  createdBy           String?   @map("created_by")

  room                Room      @relation(fields: [roomId], references: [id])
  responsibleUser     User?     @relation("ResponsibleBlocks", fields: [responsibleUserId], references: [id])
  creator             User?     @relation("CreatedBlocks", fields: [createdBy], references: [id])

  @@index([date])
  @@index([roomId])
  @@index([date, roomId])
  @@map("technical_blocks")
}
```

---

## 3. ะขะธะฟั ัะพะฑััะธะน ะฒ ัะฐัะฟะธัะฐะฝะธะธ

### 3.1. ะะฐะฝััะธั ัััะดะธะน ะธ ัะตะบัะธะน

**ะขะธะฟ:** `Schedule`

**ะฅะฐัะฐะบัะตัะธััะธะบะธ:**
- ะัะธะฒัะทะฐะฝั ะบ ะณััะฟะฟะต ะธะปะธ ะธะฝะดะธะฒะธะดัะฐะปัะฝัะต
- ะะผะตัั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั
- ะะพะณัั ะฑััั ะฟะพะฒัะพััััะธะผะธัั
- ะะปะธะตะฝัั ะทะฐะฟะธััะฒะฐัััั ะฝะฐ ะทะฐะฝััะธั
- ะะตะดะตััั ััะตั ะฟะพัะตัะฐะตะผะพััะธ

**ะะพะดัะธะฟั:**
- ะััะฟะฟะพะฒัะต ะทะฐะฝััะธั (group)
- ะะฝะดะธะฒะธะดัะฐะปัะฝัะต ะทะฐะฝััะธั (individual)

### 3.2. ะัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธะน

**ะขะธะฟ:** `Rental`

**ะฅะฐัะฐะบัะตัะธััะธะบะธ:**
- ะะปะธะตะฝั ะผะพะถะตั ะฑััั ะฒะฝะตัะฝะธะผ (ะฝะต ะธะท CRM)
- ะะผะตะตั ััะฐัััั (ะทะฐะฟัะพั โ ะฟะพะดัะฒะตัะถะดะตะฝะฐ โ ะพะฟะปะฐัะตะฝะฐ โ ะทะฐะฒะตััะตะฝะฐ)
- ะะฐัััะธััะฒะฐะตััั ััะพะธะผะพััั
- ะะพะถะตั ะฑััั ะพัะผะตะฝะตะฝะฐ ั ะฒะพะทะฒัะฐัะพะผ ััะตะดััะฒ

### 3.3. ะะตัะพะฟัะธััะธั

**ะขะธะฟ:** `Event`

**ะฅะฐัะฐะบัะตัะธััะธะบะธ:**
- ะะพะณัั ะทะฐะฝะธะผะฐัั ะฝะตัะบะพะปัะบะพ ะฟะพะผะตัะตะฝะธะน ะพะดะฝะพะฒัะตะผะตะฝะฝะพ
- ะัะบััััะต ะดะปั ะฟะพัะตัะตะฝะธั
- ะะต ััะตะฑััั ะฟัะตะดะฒะฐัะธัะตะปัะฝะพะน ะทะฐะฟะธัะธ
- ะะผะตัั ะผะฐะบัะธะผะฐะปัะฝัั ะฒะผะตััะธะผะพััั (ะธะฝัะพัะผะฐัะธะพะฝะฝะพ)

### 3.4. ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ

**ะขะธะฟ:** `TechnicalBlock`

**ะฅะฐัะฐะบัะตัะธััะธะบะธ:**
- ะะปะพะบะธัััั ะฟะพะผะตัะตะฝะธะต ะดะปั ัะตัะฝะธัะตัะบะธั ะฝัะถะด
- ะะต ัะฒัะทะฐะฝั ั ะบะปะธะตะฝัะฐะผะธ
- ะะต ะธะผะตัั ะพะฟะปะฐัั
- ะัะธะผะตัั: ัะตะผะพะฝั, ัะฑะพัะบะฐ, ะพะฑัะปัะถะธะฒะฐะฝะธะต ะพะฑะพััะดะพะฒะฐะฝะธั

---

## 4. ะกะบะฒะพะทะฝะพะต ัะฐัะฟะธัะฐะฝะธะต

### 4.1. ะะพะฝัะตะฟัะธั

ะกะบะฒะพะทะฝะพะต ัะฐัะฟะธัะฐะฝะธะต ะพะฑัะตะดะธะฝัะตั ะฒัะต ัะธะฟั ัะพะฑััะธะน ะฒ ะตะดะธะฝะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต. ะะพะทะฒะพะปัะตั ะฒะธะดะตัั ะฟะพะปะฝัั ะบะฐััะธะฝั ะทะฐะฝััะพััะธ ะฟะพะผะตัะตะฝะธะน ะธ ะฟัะตะฟะพะดะฐะฒะฐัะตะปะตะน.

### 4.2. ะัะพะฑัะฐะถะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั

**ะัะตะดััะฐะฒะปะตะฝะธะต:** ะัะธะด ะฟะพ ะฟะพะผะตัะตะฝะธัะผ

```
         | 09:00 | 10:00 | 11:00 | 12:00 | 13:00 | 14:00 | 15:00 | ...
---------|-------|-------|-------|-------|-------|-------|-------|
ะะฐะป โ1   | [ะะพะณะฐ  ----------]     |       | [ะขะฐะฝัั    ----------]
ะะฐะป โ2   |       | [ะัะตะฝะดะฐ ----------------]       |
ะะปะฐัั โ1 | [ะะฝะณะปะธะนัะบะธะน --]  | [ะัะทัะบะฐ -----]       |
...
```

**ะฆะฒะตัะพะฒะฐั ะธะฝะดะธะบะฐัะธั:**
- ะะฐะฝััะธั ัััะดะธะน: ัะธะฝะธะน
- ะัะตะฝะดะฐ: ะทะตะปะตะฝัะน
- ะะตัะพะฟัะธััะธั: ะพัะฐะฝะถะตะฒัะน
- ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ: ัะตััะน

### 4.3. ะะตะถะธะผั ะพัะพะฑัะฐะถะตะฝะธั

**1. ะะตะฝั:**
- ะัะต ะฟะพะผะตัะตะฝะธั ะฝะฐ ะพะดะธะฝ ะดะตะฝั
- ะัะตะผะตะฝะฝัะต ัะปะพัั ั 8:00 ะดะพ 22:00
- ะกะตัะบะฐ ั ัะฐะณะพะผ 1 ัะฐั (ะผะพะถะฝะพ ะทัะผะธัะพะฒะฐัั)

**2. ะะตะดะตะปั:**
- ะขะตะบััะฐั ะฝะตะดะตะปั
- ะะฝะธ ะฟะพ ะณะพัะธะทะพะฝัะฐะปะธ, ะฟะพะผะตัะตะฝะธั ะฟะพ ะฒะตััะธะบะฐะปะธ
- ะฃะฟัะพัะตะฝะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต (ัะพะปัะบะพ ะฝะฐะทะฒะฐะฝะธั ัะพะฑััะธะน)

**3. ะะตััั:**
- ะะฐะปะตะฝะดะฐัะฝะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต
- ะะฝะดะธะบะฐัะพัั ะทะฐะฝััะพััะธ ะฟะพะผะตัะตะฝะธะน ะฟะพ ะดะฝัะผ
- ะะปะธะบ ะฝะฐ ะดะตะฝั โ ะฟะพะดัะพะฑะฝะพะต ัะฐัะฟะธัะฐะฝะธะต ะดะฝั

---

## 5. ะกะพะทะดะฐะฝะธะต ะทะฐะฝััะธะน

### 5.1. ะะฐะทะพะฒะพะต ะทะฐะฝััะธะต

**ะัะพัะตัั ัะพะทะดะฐะฝะธั:**

```
1. ะัะฑัะฐัั ัะธะฟ: ะััะฟะฟะพะฒะพะต ะธะปะธ ะะฝะดะธะฒะธะดัะฐะปัะฝะพะต

2. ะะปั ะณััะฟะฟะพะฒะพะณะพ:
   โโ ะัะฑัะฐัั ะณััะฟะฟั ะธะท ัะฟะธัะบะฐ
   โโ ะัะตะฟะพะดะฐะฒะฐัะตะปั ะฟะพะดััะณะธะฒะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
   โโ ะะพะผะตัะตะฝะธะต ะฟะพะดััะณะธะฒะฐะตััั ะฟะพ ัะผะพะปัะฐะฝะธั (ะผะพะถะฝะพ ะธะทะผะตะฝะธัั)

3. ะะปั ะธะฝะดะธะฒะธะดัะฐะปัะฝะพะณะพ:
   โโ ะัะฑัะฐัั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั
   โโ ะัะฑัะฐัั ะบะปะธะตะฝัะฐ
   โโ ะัะฑัะฐัั ะฟะพะผะตัะตะฝะธะต

4. ะฃะบะฐะทะฐัั ะดะฐัั ะธ ะฒัะตะผั:
   โโ ะะฐัะฐ: ะฒัะฑะพั ะธะท ะบะฐะปะตะฝะดะฐัั
   โโ ะะฐัะฐะปะพ: ะฟัะพะธะทะฒะพะปัะฝะพะต ะฒัะตะผั (ะฝะฐะฟัะธะผะตั, 18:37)
   โโ ะะบะพะฝัะฐะฝะธะต: ะฟัะพะธะทะฒะพะปัะฝะพะต ะฒัะตะผั (ะฐะฒัะพะฟะพะดััะฐะฝะพะฒะบะฐ +1 ัะฐั)

5. ะัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ:
   โโ ะัะพะฒะตัะบะฐ ะทะฐะฝััะพััะธ ะฟะพะผะตัะตะฝะธั
   โโ ะัะพะฒะตัะบะฐ ะทะฐะฝััะพััะธ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั
   โโ ะัะปะธ ะบะพะฝัะปะธะบั โ ะะจะะะะ "ะะพะผะตัะตะฝะธะต/ะัะตะฟะพะดะฐะฒะฐัะตะปั ะทะฐะฝัั"

6. ะกะพััะฐะฝะตะฝะธะต:
   โโ ะกะพะทะดะฐะฝะธะต ะทะฐะฟะธัะธ ะฒ Schedule
```

**Validation:**
- ะะฐัะฐ ะฝะต ะฒ ะฟัะพัะปะพะผ
- ะัะตะผั ะพะบะพะฝัะฐะฝะธั > ะฒัะตะผะตะฝะธ ะฝะฐัะฐะปะฐ
- ะะพะผะตัะตะฝะธะต ัััะตััะฒัะตั
- ะัะตะฟะพะดะฐะฒะฐัะตะปั ัััะตััะฒัะตั
- ะััะฟะฟะฐ ัััะตััะฒัะตั (ะดะปั ะณััะฟะฟะพะฒะพะณะพ)
- ะะตั ะบะพะฝัะปะธะบัะพะฒ ะฑัะพะฝะธัะพะฒะฐะฝะธั

### 5.2. ะััััะพะต ัะพะทะดะฐะฝะธะต ะธะท ะบะฐะปะตะฝะดะฐัั

**UX:**
```
1. ะะปะธะบ ะฝะฐ ัะฒะพะฑะพะดะฝัะน ัะปะพั ะฒ ัะฐัะฟะธัะฐะฝะธะธ
2. ะัะบััะฒะฐะตััั ัะพัะผะฐ ั ะฟัะตะดะทะฐะฟะพะปะฝะตะฝะฝัะผะธ:
   โโ ะะพะผะตัะตะฝะธะต (ะธะท ะฒัะฑัะฐะฝะฝะพะน ัััะพะบะธ)
   โโ ะะฐัะฐ (ะธะท ะฒัะฑัะฐะฝะฝะพะณะพ ะดะฝั)
   โโ ะัะตะผั ะฝะฐัะฐะปะฐ (ะธะท ะฒัะฑัะฐะฝะฝะพะณะพ ัะปะพัะฐ)
3. ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ัะธะฟ ะธ ะดะพะฟ. ะฟะฐัะฐะผะตััั
4. ะกะพััะฐะฝะตะฝะธะต
```

---

## 6. ะะพะฒัะพััััะธะตัั ะทะฐะฝััะธั

> **๐ ะะพะดัะพะฑะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั:** ะกะผ. [ะะพะดัะปั 8: ะะปะฐะฝะธัะพะฒัะธะบ ัะฐัะฟะธัะฐะฝะธั](./08_SCHEDULE_PLANNER_MODULE.md)

### 6.1. ะะพะฝัะตะฟัะธั

ะะพะฒัะพััััะตะตัั ะทะฐะฝััะธะต ัะพะทะดะฐะตั ัะตัะธั ัะฒัะทะฐะฝะฝัั ะทะฐะฝััะธะน ะฟะพ ะทะฐะดะฐะฝะฝะพะผั ะฟัะฐะฒะธะปั (ะฝะฐะฟัะธะผะตั, ะบะฐะถะดัะน ะฟะพะฝะตะดะตะปัะฝะธะบ, ััะตะดั ะธ ะฟััะฝะธัั ะฒ 18:00).

**ะะปั ัะพะทะดะฐะฝะธั ะฟะพะฒัะพััััะธััั ะทะฐะฝััะธะน ะธัะฟะพะปัะทัะนัะต ะะพะดัะปั ะะปะฐะฝะธัะพะฒัะธะบะฐ ัะฐัะฟะธัะฐะฝะธั**, ะบะพัะพััะน ะฟัะตะดะพััะฐะฒะปัะตั:
- ะะธะทัะฐะปัะฝัะน ะฟัะตะดะฟัะพัะผะพัั ัะพะทะดะฐะฒะฐะตะผัั ะทะฐะฝััะธะน
- ะะฒัะพะผะฐัะธัะตัะบัั ะฟัะพะฒะตัะบั ะธ ัะฐะทัะตัะตะฝะธะต ะบะพะฝัะปะธะบัะพะฒ
- ะะฐััะพะฒัะต ะพะฟะตัะฐัะธะธ (ะธะทะผะตะฝะตะฝะธะต, ะบะพะฟะธัะพะฒะฐะฝะธะต, ะพัะผะตะฝะฐ)
- ะะฒัะพะผะฐัะธัะตัะบัั ะทะฐะฟะธัั ะบะปะธะตะฝัะพะฒ ะณััะฟะฟั ั ะฐะบัะธะฒะฝัะผะธ ะฐะฑะพะฝะตะผะตะฝัะฐะผะธ

### 6.2. ะัะฐะฒะธะปะพ ะฟะพะฒัะพัะตะฝะธั

**ะคะพัะผะฐั:** ะะพ ะดะฝัะผ ะฝะตะดะตะปะธ

**ะะฐัะฐะผะตััั:**
- ะะฝะธ ะฝะตะดะตะปะธ (ะะฝ, ะั, ะกั, ะงั, ะั, ะกะฑ, ะั) - ะผะฝะพะถะตััะฒะตะฝะฝัะน ะฒัะฑะพั
- ะัะตะผั ะฝะฐัะฐะปะฐ
- ะัะตะผั ะพะบะพะฝัะฐะฝะธั
- ะะฐัะฐ ะฝะฐัะฐะปะฐ
- ะะฐัะฐ ะพะบะพะฝัะฐะฝะธั (ะดะพ ะบะฐะบะพะณะพ ัะธัะปะฐ ัะพะทะดะฐะฒะฐัั)

**ะัะธะผะตั:**
```
ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั
ะะฝะธ: ะะพะฝะตะดะตะปัะฝะธะบ, ะกัะตะดะฐ, ะััะฝะธัะฐ
ะัะตะผั: 18:00 - 19:30
ะก: 01.12.2024
ะะพ: 31.12.2024

โ ะัะดะตั ัะพะทะดะฐะฝะพ ~13 ะทะฐะฝััะธะน
โ ะะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟะธัะฐะฝะพ 12 ะบะปะธะตะฝัะพะฒ ั ะฐะบัะธะฒะฝัะผะธ ะฐะฑะพะฝะตะผะตะฝัะฐะผะธ
```

### 6.3. ะัะพัะตัั ัะพะทะดะฐะฝะธั

```
1. ะัะฑัะฐัั "ะกะพะทะดะฐัั ะฟะพะฒัะพััััะตะตัั ะทะฐะฝััะธะต"

2. ะะฐะฟะพะปะฝะธัั ะฑะฐะทะพะฒัะต ะฟะฐัะฐะผะตััั:
   โโ ะััะฟะฟะฐ/ะัะตะฟะพะดะฐะฒะฐัะตะปั
   โโ ะะพะผะตัะตะฝะธะต
   โโ ะัะตะผั

3. ะะฐัััะพะธัั ะฟัะฐะฒะธะปะพ ะฟะพะฒัะพัะตะฝะธั:
   โโ ะัะฑัะฐัั ะดะฝะธ ะฝะตะดะตะปะธ [โ ะะฝ โ ะั โ ะกั โ ะงั โ ะั โ ะกะฑ โ ะั]
   โโ ะะฐัะฐ ะฝะฐัะฐะปะฐ: [01.12.2024]
   โโ ะะฐัะฐ ะพะบะพะฝัะฐะฝะธั: [31.12.2024]

4. ะัะตะดะฟัะพัะผะพัั:
   "ะัะดะตั ัะพะทะดะฐะฝะพ 13 ะทะฐะฝััะธะน:
    - 02.12.2024 (ะะฝ) 18:00-19:30
    - 04.12.2024 (ะกั) 18:00-19:30
    - 06.12.2024 (ะั) 18:00-19:30
    ...
    - 30.12.2024 (ะะฝ) 18:00-19:30"

5. ะัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ:
   โโ ะัะพะฒะตัะธัั ะบะฐะถะดัั ะดะฐัั
   โโ ะัะปะธ ะตััั ะบะพะฝัะปะธะบัั โ ะะพะบะฐะทะฐัั ัะฟะธัะพะบ
   โโ ะะฐัะธะฐะฝั: "ะัะพะฟัััะธัั ะบะพะฝัะปะธะบัะฝัะต" ะธะปะธ "ะัะผะตะฝะฐ"

6. ะกะพะทะดะฐะฝะธะต:
   โโ ะกะพะทะดะฐัั ัะพะดะธัะตะปััะบัั ะทะฐะฟะธัั (parent_schedule_id = NULL, is_recurring = true)
   โโ ะกะพะทะดะฐัั ะดะพัะตัะฝะธะต ะทะฐะฟะธัะธ ะดะปั ะบะฐะถะดะพะน ะดะฐัั (parent_schedule_id = ID ัะพะดะธัะตะปั)
   โโ ะกะพััะฐะฝะธัั recurrence_rule ะดะปั ะฒะพะทะผะพะถะฝะพะน ะผะพะดะธัะธะบะฐัะธะธ
```

### 6.4. ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟะพะฒัะพััััะตะณะพัั ะทะฐะฝััะธั

**ะัะธ ะบะปะธะบะต ะฝะฐ ะทะฐะฝััะธะต ะธะท ัะตัะธะธ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะตะดะฐะบัะธัะพะฒะฐัั ะฟะพะฒัะพััััะตะตัั ะทะฐะฝััะธะต    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะัะธะผะตะฝะธัั ะธะทะผะตะฝะตะฝะธั ะบ:                 โ
โ                                        โ
โ โ ะขะพะปัะบะพ ััะพะผั ะทะฐะฝััะธั                 โ
โ   (02.12.2024 18:00)                   โ
โ                                        โ
โ โ ะญัะพะผั ะธ ะฒัะตะผ ะฑัะดััะธะผ ะทะฐะฝััะธัะผ        โ
โ   (13 ะทะฐะฝััะธะน ะฝะฐัะธะฝะฐั ั 02.12.2024)    โ
โ                                        โ
โ [ะัะผะตะฝะฐ]  [ะัะพะดะพะปะถะธัั]                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะพะณะธะบะฐ:**

**ะะฐัะธะฐะฝั 1: ะขะพะปัะบะพ ััะพ ะทะฐะฝััะธะต**
```
- ะะฐะทะพัะฒะฐัั ัะฒัะทั ั ัะพะดะธัะตะปะตะผ (parent_schedule_id = NULL)
- ะกะดะตะปะฐัั is_recurring = false
- ะัะธะผะตะฝะธัั ะธะทะผะตะฝะตะฝะธั ัะพะปัะบะพ ะบ ััะพะน ะทะฐะฟะธัะธ
```

**ะะฐัะธะฐะฝั 2: ะญัะพ ะธ ะฒัะต ะฑัะดััะธะต**
```
- ะะฑะฝะพะฒะธัั ัะพะดะธัะตะปััะบัั ะทะฐะฟะธัั (ะตัะปะธ ัะตะดะฐะบัะธััะตััั ะฟะตัะฒะพะต)
- ะะะ
- ะฃะดะฐะปะธัั ะฒัะต ะฑัะดััะธะต ะดะพัะตัะฝะธะต ะทะฐะฟะธัะธ
- ะกะพะทะดะฐัั ะฝะพะฒัั ัะตัะธั ั ะฝะพะฒัะผะธ ะฟะฐัะฐะผะตััะฐะผะธ
```

### 6.5. ะฃะดะฐะปะตะฝะธะต ะฟะพะฒัะพััััะตะณะพัั ะทะฐะฝััะธั

**ะัะธ ัะดะฐะปะตะฝะธะธ ะทะฐะฝััะธั ะธะท ัะตัะธะธ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะฃะดะฐะปะธัั ะฟะพะฒัะพััััะตะตัั ะทะฐะฝััะธะต          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะฃะดะฐะปะธัั:                               โ
โ                                        โ
โ โ ะขะพะปัะบะพ ััะพั ัะบะทะตะผะฟะปัั                โ
โ   (02.12.2024 18:00)                   โ
โ                                        โ
โ โ ะญัะพ ะธ ะฒัะต ะฑัะดััะธะต ะทะฐะฝััะธั            โ
โ   (13 ะทะฐะฝััะธะน)                         โ
โ                                        โ
โ โ ะัั ัะตัะธั                            โ
โ   (13 ะทะฐะฝััะธะน)                         โ
โ                                        โ
โ [ะัะผะตะฝะฐ]  [ะฃะดะฐะปะธัั]                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 7. ะัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธะน

### 7.1. ะัะพัะตัั ะพัะพัะผะปะตะฝะธั ะฐัะตะฝะดั

**ะะฒะฐ ะฒะฐัะธะฐะฝัะฐ:**

#### ะะฐัะธะฐะฝั A: ะงะตัะตะท ะทะฐัะฒะบั (ะดะปั ะฒะฝะตัะฝะธั ะบะปะธะตะฝัะพะฒ)

```
1. ะะตะฝะตะดะถะตั ัะพะทะดะฐะตั ะทะฐัะฒะบั ะฝะฐ ะฐัะตะฝะดั
   โโ ะกัะฐััั: "ะะฐะฟัะพั"
   โโ ะะต ะฑะปะพะบะธััะตั ะฟะพะผะตัะตะฝะธะต ะถัััะบะพ
   โโ ะะธะดะฝะฐ ะฒ ัะฐัะฟะธัะฐะฝะธะธ ัะตััะผ ัะฒะตัะพะผ

2. ะะดะผะธะฝะธัััะฐัะพั ะฟัะพะฒะตััะตั ะทะฐัะฒะบั
   โโ ะะพะดัะฒะตัะถะดะฐะตั โ ะกัะฐััั "ะะพะดัะฒะตัะถะดะตะฝะฐ"
   โโ ะะปะธ ะพัะบะปะพะฝัะตั ั ะบะพะผะผะตะฝัะฐัะธะตะผ

3. ะะปะธะตะฝั ะพะฟะปะฐัะธะฒะฐะตั
   โโ ะะตะฝะตะดะถะตั ะพัะผะตัะฐะตั ะพะฟะปะฐัั
   โโ ะกัะฐััั: "ะะฟะปะฐัะตะฝะฐ"

4. ะะพัะปะต ะฟัะพะฒะตะดะตะฝะธั ะผะตัะพะฟัะธััะธั
   โโ ะกัะฐััั: "ะะฐะฒะตััะตะฝะฐ"
```

#### ะะฐัะธะฐะฝั B: ะะตะฟะพััะตะดััะฒะตะฝะฝะพะต ะฑัะพะฝะธัะพะฒะฐะฝะธะต

```
1. ะะตะฝะตะดะถะตั ัะพะทะดะฐะตั ะฐัะตะฝะดั
   โโ ะกัะฐะทั ัะพ ััะฐัััะพะผ "ะะพะดัะฒะตัะถะดะตะฝะฐ"
   โโ ะะพะผะตัะตะฝะธะต ะฑะปะพะบะธััะตััั
   โโ ะะธะดะฝะฐ ะฒ ัะฐัะฟะธัะฐะฝะธะธ ะทะตะปัะฝัะผ ัะฒะตัะพะผ

2. ะะปะธะตะฝั ะพะฟะปะฐัะธะฒะฐะตั
   โโ ะกัะฐััั: "ะะฟะปะฐัะตะฝะฐ"

3. ะะพัะปะต ะผะตัะพะฟัะธััะธั
   โโ ะกัะฐััั: "ะะฐะฒะตััะตะฝะฐ"
```

### 7.2. ะคะพัะผะฐ ัะพะทะดะฐะฝะธั ะฐัะตะฝะดั

**ะะฑัะทะฐัะตะปัะฝัะต ะฟะพะปั:**
- ะะพะผะตัะตะฝะธะต
- ะะฐัะฐ
- ะัะตะผั ะฝะฐัะฐะปะฐ
- ะัะตะผั ะพะบะพะฝัะฐะฝะธั
- ะคะะ ะบะปะธะตะฝัะฐ
- ะขะตะปะตัะพะฝ ะบะปะธะตะฝัะฐ
- ะกัะพะธะผะพััั

**ะะฟัะธะพะฝะฐะปัะฝัะต ะฟะพะปั:**
- Email ะบะปะธะตะฝัะฐ
- ะขะธะฟ ะผะตัะพะฟัะธััะธั (ะฒัะฟะฐะดะฐััะธะน ัะฟะธัะพะบ ะธะปะธ ัะฒะพะฑะพะดะฝัะน ะฒะฒะพะด)
- ะะถะธะดะฐะตะผะพะต ะบะพะปะธัะตััะฒะพ ะณะพััะตะน
- ะะพะฟะพะปะฝะธัะตะปัะฝัะต ััะปัะณะธ (ัะตะบััะพะฒะพะต ะฟะพะปะต)
- ะัะธะผะตัะฐะฝะธั

### 7.3. ะะฐััะตั ััะพะธะผะพััะธ ะฐัะตะฝะดั

**ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฐััะตั (ัะตะบะพะผะตะฝะดัะตะผัะน):**

```typescript
function calculateRentalPrice(
  roomId: string,
  startTime: Date,
  endTime: Date
): number {
  const room = await getRoom(roomId);
  const hours = (endTime - startTime) / (1000 * 60 * 60); // ะฒ ัะฐัะฐั

  // ะะพัะฐัะพะฒะฐั ััะฐะฒะบะฐ
  const calculatedPrice = room.hourlyRate * Math.ceil(hours);

  return calculatedPrice;
}
```

**ะัะธะผะตั:**
```
ะะพะผะตัะตะฝะธะต: ะะฐะป โ1 (ััะฐะฒะบะฐ 2000 โฝ/ัะฐั)
ะัะตะผั: 18:00 - 21:30 (3.5 ัะฐัะฐ)
ะะฐัััะธัะฐะฝะพ: 2000 * 4 = 8000 โฝ (ะพะบััะณะปะตะฝะธะต ะดะพ ัะตะปะพะณะพ ัะฐัะฐ ะฒะฒะตัั)

ะะตะฝะตะดะถะตั ะผะพะถะตั ะธะทะผะตะฝะธัั ะฝะฐ: 7000 โฝ (ัะพ ัะบะธะดะบะพะน)
```

**UI:**
```
ะกัะพะธะผะพััั:
  ะะฐัััะธัะฐะฝะฝะฐั:  [8 000 โฝ] (ะฐะฒัะพะผะฐัะธัะตัะบะธ)
  ะัะพะณะพะฒะฐั:      [7 000 โฝ] โ ะผะพะถะฝะพ ะธะทะผะตะฝะธัั ะฒัััะฝัั

  โ ะัะธะผะตะฝะธัั ัะบะธะดะบั: -1000 โฝ
  ะัะธัะธะฝะฐ ัะบะธะดะบะธ: [ะะพััะพัะฝะฝัะน ะบะปะธะตะฝั]
```

### 7.4. ะกัะฐัััั ะฐัะตะฝะดั

| ะกัะฐััั | ะะฟะธัะฐะฝะธะต | ะฆะฒะตั ะฒ ัะฐัะฟะธัะฐะฝะธะธ | ะะพะถะฝะพ ะพัะผะตะฝะธัั |
|--------|----------|-------------------|----------------|
| REQUEST | ะะฐัะฒะบะฐ, ััะตะฑัะตั ะฟะพะดัะฒะตัะถะดะตะฝะธั | ะกะตััะน (ะฟัะฝะบัะธั) | ะะฐ |
| CONFIRMED | ะะพะดัะฒะตัะถะดะตะฝะฐ, ะพะถะธะดะฐะตััั ะพะฟะปะฐัะฐ | ะะตะปะตะฝัะน (ัะฒะตัะปัะน) | ะะฐ |
| PAID | ะะฟะปะฐัะตะฝะฐ | ะะตะปะตะฝัะน (ัะตะผะฝัะน) | ะะฐ, ั ะฒะพะทะฒัะฐัะพะผ |
| COMPLETED | ะะตัะพะฟัะธััะธะต ะทะฐะฒะตััะตะฝะพ | ะะตะปะตะฝัะน (ะทะฐัะตะผะฝะตะฝะฝัะน) | ะะตั |
| CANCELLED | ะัะผะตะฝะตะฝะฐ | ะัะฐัะฝัะน (ะฟะตัะตัะตัะบะฝัััะน) | ะะตั |

### 7.5. ะัะผะตะฝะฐ ะฐัะตะฝะดั ั ะฒะพะทะฒัะฐัะพะผ ััะตะดััะฒ

**ะัะฐะฒะธะปะฐ ะพัะผะตะฝั:**

```
ะะพะปะธัะธะบะฐ ะฒะพะทะฒัะฐัะฐ:
- ะะพะปะตะต 7 ะดะฝะตะน ะดะพ ะผะตัะพะฟัะธััะธั:   100% ะฒะพะทะฒัะฐั
- 3-7 ะดะฝะตะน ะดะพ ะผะตัะพะฟัะธััะธั:       50% ะฒะพะทะฒัะฐั
- ะะตะฝะตะต 3 ะดะฝะตะน ะดะพ ะผะตัะพะฟัะธััะธั:   0% ะฒะพะทะฒัะฐั
- ะ ะดะตะฝั ะผะตัะพะฟัะธััะธั:            0% ะฒะพะทะฒัะฐั
```

**ะัะพัะตัั:**

```
1. ะะตะฝะตะดะถะตั ะฝะฐะถะธะผะฐะตั "ะัะผะตะฝะธัั ะฐัะตะฝะดั"

2. ะกะธััะตะผะฐ ัะฐัััะธััะฒะฐะตั ะฒะพะทะฒัะฐั:
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะัะผะตะฝะฐ ะฐัะตะฝะดั                          โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
   โ ะะฐัะฐ ะผะตัะพะฟัะธััะธั: 20.12.2024           โ
   โ ะกะตะณะพะดะฝั: 10.12.2024                    โ
   โ ะะพ ะผะตัะพะฟัะธััะธั: 10 ะดะฝะตะน                โ
   โ                                        โ
   โ ะกัะพะธะผะพััั ะฐัะตะฝะดั: 8 000 โฝ              โ
   โ ะะพะทะฒัะฐั: 8 000 โฝ (100%)                โ
   โ                                        โ
   โ ะัะธัะธะฝะฐ ะพัะผะตะฝั:                        โ
   โ [____________________________]         โ
   โ                                        โ
   โ [ะัะผะตะฝะฐ]  [ะะพะดัะฒะตัะดะธัั ะพัะผะตะฝั]         โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

3. ะะพะดัะฒะตัะถะดะตะฝะธะต:
   โโ ะกัะฐััั โ CANCELLED
   โโ cancelled_at = NOW()
   โโ cancellation_reason = ัะตะบัั
   โโ refund_amount = ัะฐัััะธัะฐะฝะฝะฐั ััะผะผะฐ
   โโ ะกะพะทะดะฐัั ะฒะพะทะฒัะฐัะฝัะน ะฟะปะฐัะตะถ (Payment ั ะพััะธัะฐัะตะปัะฝะพะน ััะผะผะพะน)

4. ะฃะฒะตะดะพะผะปะตะฝะธะต ะบะปะธะตะฝัั (ะตัะปะธ email ัะบะฐะทะฐะฝ):
   "ะะฐัะฐ ะฐัะตะฝะดะฐ ะพั 20.12.2024 ะพัะผะตะฝะตะฝะฐ.
    ะกัะผะผะฐ ะฒะพะทะฒัะฐัะฐ: 8 000 โฝ"
```

### 7.6. ะัะตะฝะดะฐ ะดะปั ััะธะดะธัะตัะบะธั ะปะธั (ะบะพะผะฟะฐะฝะธะน)

#### 7.6.1. ะัะปะธัะธั ะพั ัะธะทะธัะตัะบะธั ะปะธั

ะัะธ ะพัะพัะผะปะตะฝะธะธ ะฐัะตะฝะดั ะดะปั ะบะพะผะฟะฐะฝะธะธ:

**ะะฑัะทะฐัะตะปัะฝัะต ัะตะบะฒะธะทะธัั ะบะพะผะฟะฐะฝะธะธ:**
- ะะฐะธะผะตะฝะพะฒะฐะฝะธะต ะพัะณะฐะฝะธะทะฐัะธะธ
- ะะะ (10 ะธะปะธ 12 ัะธัั)
- ะขะตะปะตัะพะฝ
- ะัะฝะพะฒะฝะพะต ะบะพะฝัะฐะบัะฝะพะต ะปะธัะพ (ะธะท ัะฐะฑะปะธัั CompanyContact)

**ะกะฟะพัะพะฑั ะพะฟะปะฐัั:**
- โ ะะตะทะฝะฐะปะธัะฝัะน ัะฐััะตั (ะฟะพ ััะตัั)
- โ ะะฝะปะฐะนะฝ-ะพะฟะปะฐัะฐ (ะฎะะฐััะฐ)
- โ ะะฐะปะธัะฝัะต (ะฝะตะดะพัััะฟะฝะพ ะดะปั ะบะพะผะฟะฐะฝะธะน)

**ะะฒัะพะผะฐัะธัะตัะบะฐั ะณะตะฝะตัะฐัะธั ะดะพะณะพะฒะพัะฐ:**
- ะะพะณะพะฒะพั ะฐัะตะฝะดั ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะฟะพะดัะฒะตัะถะดะตะฝะธะธ ะฐัะตะฝะดั
- ะคะพัะผะฐั: PDF
- ะฅัะฐะฝะธััั ะฒ ัะฐะฑะปะธัะต RentalContract

#### 7.6.2. ะคะพัะผะฐ ัะพะทะดะฐะฝะธั ะฐัะตะฝะดั ะดะปั ะบะพะผะฟะฐะฝะธะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะพะฒะฐั ะฐัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธั                      [ร]        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะขะธะฟ ะบะปะธะตะฝัะฐ:                                           โ
โ  โ ะคะธะทะธัะตัะบะพะต ะปะธัะพ   โ ะฎัะธะดะธัะตัะบะพะต ะปะธัะพ (ะบะพะผะฟะฐะฝะธั)    โ
โ                                                        โ
โ ===== ะัะปะธ ะฒัะฑัะฐะฝะพ "ะฎัะธะดะธัะตัะบะพะต ะปะธัะพ" =====           โ
โ                                                        โ
โ ะะพะผะฟะฐะฝะธั:                                              โ
โ  โ ะกััะตััะฒัััะฐั: [ะัะฑัะฐัั ะธะท ัะฟะธัะบะฐ โผ]                โ
โ    โ ะะะ "ะะพะณะฐ ะธ ะบะพะฟััะฐ"                               โ
โ      ะะะ: 7707083893                                   โ
โ      ะะพะฝัะฐะบั: ะะฒะฐะฝะพะฒ ะ.ะ. (ะะธัะตะบัะพั)                   โ
โ                                                        โ
โ  โ ะะพะฒะฐั ะบะพะผะฟะฐะฝะธั:                                     โ
โ    ะะฐะธะผะตะฝะพะฒะฐะฝะธะต: [________________________]            โ
โ    ะะะ: [__________]                                   โ
โ    ะขะตะปะตัะพะฝ: [+7 (___) ___-__-__]                       โ
โ    Email: [________________________]                   โ
โ                                                        โ
โ    ะะพะฝัะฐะบัะฝะพะต ะปะธัะพ:                                    โ
โ    ะคะะ: [________________________]                     โ
โ    ะะพะปะถะฝะพััั: [________________________]               โ
โ    ะขะตะปะตัะพะฝ: [+7 (___) ___-__-__]                       โ
โ                                                        โ
โ ะะพะผะตัะตะฝะธะต: [ะัะฑัะฐัั ะฟะพะผะตัะตะฝะธะต โผ]                       โ
โ ะะฐัะฐ: [__/__/____]                                     โ
โ ะัะตะผั: [__:__] - [__:__]                               โ
โ                                                        โ
โ ะขะธะฟ ะผะตัะพะฟัะธััะธั: [________________________]            โ
โ ะะถะธะดะฐะตะผะพะต ะบะพะปะธัะตััะฒะพ ะณะพััะตะน: [____]                    โ
โ                                                        โ
โ ะกัะพะธะผะพััั:                                             โ
โ  ะะฐัััะธัะฐะฝะฝะฐั: [8 000 โฝ] (ะฐะฒัะพะผะฐัะธัะตัะบะธ)              โ
โ  ะัะพะณะพะฒะฐั:     [8 000 โฝ]                              โ
โ                                                        โ
โ ะกะฟะพัะพะฑ ะพะฟะปะฐัั:                                         โ
โ  โ ะะตะทะฝะฐะปะธัะฝัะน ัะฐััะตั                                  โ
โ  โ ะะฝะปะฐะนะฝ-ะพะฟะปะฐัะฐ                                       โ
โ                                                        โ
โ โ ะกะณะตะฝะตัะธัะพะฒะฐัั ะดะพะณะพะฒะพั ะฐัะตะฝะดั                         โ
โ                                                        โ
โ ะัะธะผะตัะฐะฝะธั: [________________________________]          โ
โ                                                        โ
โ                [ะัะผะตะฝะฐ]  [ะกะพะทะดะฐัั ะฐัะตะฝะดั]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### 7.6.3. ะะฒัะพะผะฐัะธัะตัะบะฐั ะณะตะฝะตัะฐัะธั ะดะพะณะพะฒะพัะฐ ะฐัะตะฝะดั

**ะะพะณะดะฐ ะณะตะฝะตัะธััะตััั:**
- ะะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ัะพะทะดะฐะฝะธะธ ะฐัะตะฝะดั ะดะปั ะบะพะผะฟะฐะฝะธะธ
- ะัะธ ัะผะตะฝะต ััะฐัััะฐ ะฝะฐ CONFIRMED

**ะัะพัะตัั:**

```
1. ะะพะปัะทะพะฒะฐัะตะปั ัะพะทะดะฐะตั ะฐัะตะฝะดั ะดะปั ะบะพะผะฟะฐะฝะธะธ
   โโ ะกัะฐััั: REQUEST ะธะปะธ CONFIRMED

2. ะัะปะธ ััะฐััั = CONFIRMED ะ clientType = COMPANY:
   โโ ะกะธััะตะผะฐ ะฟะพะปััะฐะตั ะดะฐะฝะฝัะต ะบะพะผะฟะฐะฝะธะธ ะธะท Client
   โโ ะะพะปััะฐะตั ะพัะฝะพะฒะฝะพะต ะบะพะฝัะฐะบัะฝะพะต ะปะธัะพ ะธะท CompanyContact (isPrimary=true)
   โโ ะะตะฝะตัะธััะตั ะฝะพะผะตั ะดะพะณะพะฒะพัะฐ: ะะ-ะะะะะะะะ-NNNN
   โ  (ะะ-20241215-0001)
   โโ ะะฐะฟะพะปะฝัะตั ัะฐะฑะปะพะฝ ะดะพะณะพะฒะพัะฐ ะดะฐะฝะฝัะผะธ:
   โ  โโ ะะฐะธะผะตะฝะพะฒะฐะฝะธะต ะพัะณะฐะฝะธะทะฐัะธะธ
   โ  โโ ะะะ, ะะะ, ะะะะ
   โ  โโ ะฎัะธะดะธัะตัะบะธะน ะฐะดัะตั
   โ  โโ ะะฐะฝะบะพะฒัะบะธะต ัะตะบะฒะธะทะธัั
   โ  โโ ะคะะ ะธ ะดะพะปะถะฝะพััั ะบะพะฝัะฐะบัะฝะพะณะพ ะปะธัะฐ
   โ  โโ ะะพะผะตัะตะฝะธะต
   โ  โโ ะะฐัะฐ ะธ ะฒัะตะผั ะฐัะตะฝะดั
   โ  โโ ะกัะพะธะผะพััั
   โ  โโ ะะตะบะฒะธะทะธัั ะบัะปััััะฝะพะณะพ ัะตะฝััะฐ
   โโ ะะตะฝะตัะธััะตั PDF ัะฐะนะป
   โโ ะกะพััะฐะฝัะตั ัะฐะนะป ะฒ ััะฐะฝะธะปะธัะต (ะฝะฐะฟัะธะผะตั, /uploads/contracts/)
   โโ ะกะพะทะดะฐะตั ะทะฐะฟะธัั ะฒ RentalContract:
      โโ rentalId = ID ะฐัะตะฝะดั
      โโ contractNumber = "ะะ-20241215-0001"
      โโ contractDate = ัะตะบััะฐั ะดะฐัะฐ
      โโ fileUrl = ะฟััั ะบ PDF
      โโ status = DRAFT

3. ะะพะณะพะฒะพั ะดะพัััะฟะตะฝ ะดะปั ัะบะฐัะธะฒะฐะฝะธั ะฒ ะบะฐััะพัะบะต ะฐัะตะฝะดั
```

**ะจะฐะฑะปะพะฝ ะดะพะณะพะฒะพัะฐ (ััััะบัััะฐ):**

```
ะะะะะะะ ะะะะะะซ โ {contractNumber}
{contractDate}

ะัะตะฝะดะพะดะฐัะตะปั: {centerName}
ะะะ: {centerInn}, ะะะ: {centerKpp}
ะะดัะตั: {centerAddress}

ะัะตะฝะดะฐัะพั: {companyName}
ะะะ: {companyInn}, ะะะ: {companyKpp}
ะะะะ: {companyOgrn}
ะฎัะธะดะธัะตัะบะธะน ะฐะดัะตั: {companyLegalAddress}
ะะฐะฝะบะพะฒัะบะธะต ัะตะบะฒะธะทะธัั:
  ะ/ั: {companyBankAccount}
  ะะฐะฝะบ: {companyBankName}
  ะะะ: {companyBik}
  ะ/ั: {companyCorrespondentAccount}

ะ ะปะธัะต: {contactFullName}, {contactPosition}

ะะะะะะะข ะะะะะะะะ:
1. ะัะตะฝะดะพะดะฐัะตะปั ะฟัะตะดะพััะฐะฒะปัะตั ะัะตะฝะดะฐัะพัั ะฒะพ ะฒัะตะผะตะฝะฝะพะต ะฟะพะปัะทะพะฒะฐะฝะธะต
   ะฟะพะผะตัะตะฝะธะต: {roomName}

2. ะะฐัะฐ ะธ ะฒัะตะผั ะฐัะตะฝะดั: {rentalDate} ั {startTime} ะดะพ {endTime}

3. ะะฐะทะฝะฐัะตะฝะธะต: {eventType}

ะกะขะะะะะกะขะฌ ะ ะะะะฏะะะ ะะะะะขะซ:
4. ะกัะพะธะผะพััั ะฐัะตะฝะดั ัะพััะฐะฒะปัะตั: {totalPrice} ััะฑ.

5. ะะฟะปะฐัะฐ ะฟัะพะธะทะฒะพะดะธััั ะฑะตะทะฝะฐะปะธัะฝัะผ ะฟััะตะผ ะฝะฐ ัะฐััะตัะฝัะน ััะตั ะัะตะฝะดะพะดะฐัะตะปั.

ะะะะะะกะ ะกะขะะะะ:

ะัะตะฝะดะพะดะฐัะตะปั:          ะัะตะฝะดะฐัะพั:
_________________      _________________
{centerDirector}       {contactFullName}
ะ.ะ.                   ะ.ะ.
```

#### 7.6.4. ะกัะฐัััั ะดะพะณะพะฒะพัะฐ

| ะกัะฐััั ะดะพะณะพะฒะพัะฐ | ะะฟะธัะฐะฝะธะต | ะะพะณะดะฐ ัััะฐะฝะฐะฒะปะธะฒะฐะตััั |
|-----------------|----------|----------------------|
| DRAFT | ะงะตัะฝะพะฒะธะบ | ะัะธ ัะพะทะดะฐะฝะธะธ |
| SENT | ะัะฟัะฐะฒะปะตะฝ ะบะปะธะตะฝัั | ะะพัะปะต ะพัะฟัะฐะฒะบะธ email |
| SIGNED | ะะพะดะฟะธัะฐะฝ | ะะพัะปะต ะฟะพะปััะตะฝะธั ะฟะพะดะฟะธัะฐะฝะฝะพะณะพ ัะบะฐะฝะฐ |
| CANCELLED | ะัะผะตะฝะตะฝ | ะัะธ ะพัะผะตะฝะต ะฐัะตะฝะดั |

#### 7.6.5. ะะฐะฑะพัะฐ ั ะดะพะณะพะฒะพัะพะผ ะฒ UI

**ะ ะบะฐััะพัะบะต ะฐัะตะฝะดั (ะดะปั ะบะพะผะฟะฐะฝะธะธ):**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธั                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะพะผะฟะฐะฝะธั: ะะะ "ะะพะณะฐ ะธ ะบะพะฟััะฐ"          โ
โ ะะะ: 7707083893                        โ
โ ะะพะฝัะฐะบั: ะะฒะฐะฝะพะฒ ะ.ะ. (ะะธัะตะบัะพั)        โ
โ ะขะตะปะตัะพะฝ: +7 (999) 123-45-67            โ
โ                                        โ
โ ะะพะผะตัะตะฝะธะต: ะะฐะป โ1                      โ
โ ะะฐัะฐ: 20.12.2024                       โ
โ ะัะตะผั: 18:00 - 21:00                   โ
โ ะกัะพะธะผะพััั: 8 000 โฝ                     โ
โ ะกัะฐััั: ะะพะดัะฒะตัะถะดะตะฝะฐ                   โ
โ                                        โ
โ ๐ ะะพะณะพะฒะพั ะฐัะตะฝะดั:                     โ
โ    โ ะะ-20241215-0001 ะพั 15.12.2024    โ
โ    ะกัะฐััั: ะงะตัะฝะพะฒะธะบ                    โ
โ    [ะกะบะฐัะฐัั PDF]  [ะัะฟัะฐะฒะธัั ะบะปะธะตะฝัั]  โ
โ                                        โ
โ [ะะตะดะฐะบัะธัะพะฒะฐัั]  [ะัะผะตะฝะธัั]            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### 7.6.6. ะัะฟัะฐะฒะบะฐ ะดะพะณะพะฒะพัะฐ ะบะปะธะตะฝัั

**ะัะพัะตัั:**

```
1. ะะตะฝะตะดะถะตั ะฝะฐะถะธะผะฐะตั "ะัะฟัะฐะฒะธัั ะบะปะธะตะฝัั"

2. ะกะธััะตะผะฐ ะฟัะพะฒะตััะตั ะฝะฐะปะธัะธะต email ั ะบะพะผะฟะฐะฝะธะธ

3. ะัะปะธ email ัะบะฐะทะฐะฝ:
   โโ ะัะฟัะฐะฒะปัะตั email ั ะฒะปะพะถะตะฝะธะตะผ (PDF ะดะพะณะพะฒะพัะฐ)
   โโ ะขะตะผะฐ: "ะะพะณะพะฒะพั ะฐัะตะฝะดั โ ะะ-20241215-0001"
   โโ ะขะตะปะพ ะฟะธััะผะฐ:
   โ  "ะะดัะฐะฒััะฒัะนัะต!
   โ
   โ   ะะฐะฟัะฐะฒะปัะตะผ ะะฐะผ ะดะพะณะพะฒะพั ะฐัะตะฝะดั ะฟะพะผะตัะตะฝะธั.
   โ
   โ   ะะพะผะตัะตะฝะธะต: ะะฐะป โ1
   โ   ะะฐัะฐ: 20.12.2024
   โ   ะัะตะผั: 18:00 - 21:00
   โ   ะกัะพะธะผะพััั: 8 000 ััะฑ.
   โ
   โ   ะัะพัะธะผ ะฟะพะดะฟะธัะฐัั ะดะพะณะพะฒะพั ะธ ะฒััะปะฐัั ัะบะฐะฝ ะฝะฐ ะฝะฐั email.
   โ
   โ   ะก ัะฒะฐะถะตะฝะธะตะผ,
   โ   ะัะปััััะฝัะน ัะตะฝัั"
   โ
   โโ ะะปะพะถะตะฝะธะต: contract-AR-20241215-0001.pdf
   โโ ะะฑะฝะพะฒะธัั ััะฐััั ะดะพะณะพะฒะพัะฐ: SENT

4. ะัะปะธ email ะะ ัะบะฐะทะฐะฝ:
   โโ ะะพะบะฐะทะฐัั ะพัะธะฑะบั: "ะฃ ะบะพะผะฟะฐะฝะธะธ ะฝะต ัะบะฐะทะฐะฝ email"
```

#### 7.6.7. ะฅัะฐะฝะตะฝะธะต ะดะพะณะพะฒะพัะพะฒ

**ะกัััะบัััะฐ ัะฐะนะปะพะฒะพะน ัะธััะตะผั:**

```
/uploads/
  โโ contracts/
      โโ rentals/
          โโ 2024/
          โ   โโ 12/
          โ   โ   โโ AR-20241215-0001.pdf
          โ   โ   โโ AR-20241215-0002.pdf
          โ   โ   โโ ...
          โ   โโ ...
          โโ ...
```

**ะะตะทะพะฟะฐัะฝะพััั:**
- ะะพัััะฟ ะบ ัะฐะนะปะฐะผ ัะพะปัะบะพ ะดะปั ะฐะฒัะพัะธะทะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- URL ั ัะพะบะตะฝะพะผ: `/api/contracts/{id}/download?token=xxx`
- ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะดะพัััะฟะฐ ะฟัะธ ัะบะฐัะธะฒะฐะฝะธะธ

### 7.7. API ะดะปั ัะฐะฑะพัั ั ะดะพะณะพะฒะพัะฐะผะธ ะฐัะตะฝะดั

#### POST /api/rentals/:id/generate-contract

ะะตะฝะตัะฐัะธั ะดะพะณะพะฒะพัะฐ ะดะปั ะฐัะตะฝะดั

**Response:**

```json
{
  "contract": {
    "id": "uuid",
    "rentalId": "uuid",
    "contractNumber": "ะะ-20241215-0001",
    "contractDate": "2024-12-15",
    "fileUrl": "/uploads/contracts/rentals/2024/12/AR-20241215-0001.pdf",
    "status": "DRAFT"
  }
}
```

#### POST /api/rentals/:id/send-contract

ะัะฟัะฐะฒะบะฐ ะดะพะณะพะฒะพัะฐ ะบะปะธะตะฝัั ะฟะพ email

**Request Body:**

```json
{
  "recipientEmail": "info@rogakopita.ru"
}
```

**Response:**

```json
{
  "success": true,
  "sentAt": "2024-12-15T12:00:00Z",
  "contract": {
    "id": "uuid",
    "status": "SENT"
  }
}
```

#### GET /api/contracts/:id/download

ะกะบะฐัะธะฒะฐะฝะธะต ะดะพะณะพะฒะพัะฐ

**Query:** `?token=xxx` (JWT ัะพะบะตะฝ ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ)

**Response:** PDF ัะฐะนะป

---

## 8. ะะตัะพะฟัะธััะธั

### 8.1. ะกะพะทะดะฐะฝะธะต ะผะตัะพะฟัะธััะธั

**ะะพะปั:**
- ะะฐะทะฒะฐะฝะธะต ะผะตัะพะฟัะธััะธั
- ะะฟะธัะฐะฝะธะต
- ะขะธะฟ ะผะตัะพะฟัะธััะธั (ะบะพะฝัะตัั, ะฒัััะฐะฒะบะฐ, ะผะฐััะตั-ะบะปะฐัั ะธ ั.ะด.)
- ะะฐัะฐ
- ะัะตะผั ะฝะฐัะฐะปะฐ ะธ ะพะบะพะฝัะฐะฝะธั
- ะะพะผะตัะตะฝะธั (ะผะฝะพะถะตััะฒะตะฝะฝัะน ะฒัะฑะพั)
- ะะฐะบัะธะผะฐะปัะฝะฐั ะฒะผะตััะธะผะพััั (ะธะฝัะพัะผะฐัะธะพะฝะฝะพ)
- ะัะฒะตัััะฒะตะฝะฝัะน ัะพัััะดะฝะธะบ
- ะคะพัะพ/ะฐัะธัะฐ
- ะัะธะผะตัะฐะฝะธั

**ะัะพะฑะตะฝะฝะพััั:** ะะพะถะตั ะทะฐะฝะธะผะฐัั ะฝะตัะบะพะปัะบะพ ะฟะพะผะตัะตะฝะธะน ะพะดะฝะพะฒัะตะผะตะฝะฝะพ

**ะัะธะผะตั:**
```
ะะพะฒะพะณะพะดะฝะธะน ะบะพะฝัะตัั
ะะฐัะฐ: 30.12.2024
ะัะตะผั: 18:00 - 21:00
ะะพะผะตัะตะฝะธั: ะะพะปััะพะน ะทะฐะป, ะคะพะนะต, ะะฐัะดะตัะพะฑ
ะะผะตััะธะผะพััั: 200 ัะตะปะพะฒะตะบ
```

### 8.2. ะัะพะฑัะฐะถะตะฝะธะต ะฒ ัะฐัะฟะธัะฐะฝะธะธ

- ะะตัะพะฟัะธััะธะต ะพัะพะฑัะฐะถะฐะตััั ะฒะพ ะฒัะตั ะฒัะฑัะฐะฝะฝัั ะฟะพะผะตัะตะฝะธัั
- ะฆะฒะตั: ะัะฐะฝะถะตะฒัะน
- ะัะธ ะบะปะธะบะต ะฟะพะบะฐะทัะฒะฐะตััั ะฟะพะปะฝะฐั ะธะฝัะพัะผะฐัะธั
- ะะปะพะบะธััะตั ะฟะพะผะตัะตะฝะธั ะฝะฐ ัะบะฐะทะฐะฝะฝะพะต ะฒัะตะผั

---

## 9. ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ

### 9.1. ะะฐะทะฝะฐัะตะฝะธะต

ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ ะธัะฟะพะปัะทััััั ะดะปั ะฑะปะพะบะธัะพะฒะบะธ ะฟะพะผะตัะตะฝะธะน ะฝะฐ ะฒัะตะผั:
- ะะตะผะพะฝัะฐ
- ะะตะฝะตัะฐะปัะฝะพะน ัะฑะพัะบะธ
- ะะฑัะปัะถะธะฒะฐะฝะธั ะพะฑะพััะดะพะฒะฐะฝะธั
- ะะพะดะณะพัะพะฒะบะธ ะบ ะผะตัะพะฟัะธััะธัะผ

### 9.2. ะกะพะทะดะฐะฝะธะต

**ะะพะปั:**
- ะะฐะทะฒะฐะฝะธะต (ะฝะฐะฟัะธะผะตั: "ะะตะผะพะฝั ะฟะพะปะฐ")
- ะะฟะธัะฐะฝะธะต
- ะะพะผะตัะตะฝะธะต
- ะะฐัะฐ
- ะัะตะผั ะฝะฐัะฐะปะฐ ะธ ะพะบะพะฝัะฐะฝะธั
- ะัะฒะตัััะฒะตะฝะฝัะน ัะพัััะดะฝะธะบ

**ะัะพะฑะตะฝะฝะพััั:**
- ะะต ัะฒัะทะฐะฝั ั ะบะปะธะตะฝัะฐะผะธ
- ะะตั ะพะฟะปะฐัั
- ะฆะฒะตั: ะกะตััะน

---

## 10. ะัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ

### 10.1. ะัะฐะฒะธะปะพ

**ะกััะพะณะฐั ะฟัะพะฒะตัะบะฐ:** ะะตะปัะทั ัะพะทะดะฐัั ะดะฒะฐ ัะพะฑััะธั ะฒ ะพะดะฝะพะผ ะฟะพะผะตัะตะฝะธะธ ั ะฟะตัะตัะตัะตะฝะธะตะผ ะฟะพ ะฒัะตะผะตะฝะธ.

### 10.2. ะะปะณะพัะธัะผ ะฟัะพะฒะตัะบะธ

```typescript
async function checkConflicts(
  roomId: string,
  date: Date,
  startTime: Time,
  endTime: Time,
  excludeId?: string // ะะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ัััะตััะฒัััะตะณะพ
): Promise<Conflict[]> {

  // ะัะพะฒะตััะตะผ ะฒัะต ัะธะฟั ัะพะฑััะธะน
  const conflicts = [];

  // 1. ะะฐะฝััะธั (Schedule)
  const scheduleConflicts = await prisma.schedule.findMany({
    where: {
      roomId,
      date,
      status: { not: 'CANCELLED' },
      id: { not: excludeId },
      OR: [
        // ะะพะฒะพะต ัะพะฑััะธะต ะฝะฐัะธะฝะฐะตััั ะฒะพ ะฒัะตะผั ัััะตััะฒัััะตะณะพ
        {
          startTime: { lte: startTime },
          endTime: { gt: startTime },
        },
        // ะะพะฒะพะต ัะพะฑััะธะต ะทะฐะบะฐะฝัะธะฒะฐะตััั ะฒะพ ะฒัะตะผั ัััะตััะฒัััะตะณะพ
        {
          startTime: { lt: endTime },
          endTime: { gte: endTime },
        },
        // ะะพะฒะพะต ัะพะฑััะธะต ะฟะพะปะฝะพัััั ะฟะตัะตะบััะฒะฐะตั ัััะตััะฒัััะตะต
        {
          startTime: { gte: startTime },
          endTime: { lte: endTime },
        },
      ],
    },
    include: { group: true, teacher: true },
  });

  // 2. ะัะตะฝะดะฐ (Rental)
  const rentalConflicts = await prisma.rental.findMany({
    where: {
      roomId,
      date,
      status: { in: ['CONFIRMED', 'PAID'] }, // REQUEST ะฝะต ะฑะปะพะบะธััะตั
      id: { not: excludeId },
      OR: [/* ะฐะฝะฐะปะพะณะธัะฝะพ */],
    },
  });

  // 3. ะะตัะพะฟัะธััะธั (Event)
  const eventConflicts = await prisma.event.findMany({
    where: {
      roomIds: { has: roomId },
      date,
      status: { not: 'CANCELLED' },
      id: { not: excludeId },
      OR: [/* ะฐะฝะฐะปะพะณะธัะฝะพ */],
    },
  });

  // 4. ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ
  const technicalConflicts = await prisma.technicalBlock.findMany({
    where: {
      roomId,
      date,
      id: { not: excludeId },
      OR: [/* ะฐะฝะฐะปะพะณะธัะฝะพ */],
    },
  });

  return [
    ...scheduleConflicts.map(c => ({ type: 'schedule', data: c })),
    ...rentalConflicts.map(c => ({ type: 'rental', data: c })),
    ...eventConflicts.map(c => ({ type: 'event', data: c })),
    ...technicalConflicts.map(c => ({ type: 'technical', data: c })),
  ];
}
```

### 10.3. UI ะฟัะธ ะบะพะฝัะปะธะบัะต

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ๏ธ ะะพะฝัะปะธะบั ะฑัะพะฝะธัะพะฒะฐะฝะธั              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะพะผะตัะตะฝะธะต "ะะฐะป โ1" ะทะฐะฝััะพ ะฒ ััะพ ะฒัะตะผั: โ
โ                                        โ
โ 02.12.2024 18:00 - 19:30               โ
โ ะััะฟะฟะฐ "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั"           โ
โ ะัะตะฟะพะดะฐะฒะฐัะตะปั: ะะฒะฐะฝะพะฒะฐ ะ.ะ.            โ
โ                                        โ
โ ะัะฑะตัะธัะต ะดััะณะพะต ะฒัะตะผั ะธะปะธ ะฟะพะผะตัะตะฝะธะต.   โ
โ                                        โ
โ [ะัะฑัะฐัั ะดััะณะพะต ะฟะพะผะตัะตะฝะธะต]  [ะัะผะตะฝะฐ]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 10.4. ะัะพะฒะตัะบะฐ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั

ะะพะฟะพะปะฝะธัะตะปัะฝะพ ะฟัะพะฒะตััะตััั, ััะพ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั ะฝะต ะทะฐะฝัั ะฒ ััะพ ะฒัะตะผั ะฒ ะดััะณะพะผ ะฟะพะผะตัะตะฝะธะธ:

```typescript
async function checkTeacherConflicts(
  teacherId: string,
  date: Date,
  startTime: Time,
  endTime: Time,
  excludeId?: string
): Promise<Conflict[]> {
  return await prisma.schedule.findMany({
    where: {
      teacherId,
      date,
      status: { not: 'CANCELLED' },
      id: { not: excludeId },
      OR: [/* ะฟะตัะตัะตัะตะฝะธะต ะฟะพ ะฒัะตะผะตะฝะธ */],
    },
    include: { room: true, group: true },
  });
}
```

---

## 11. ะัะผะตะฝะฐ ะธ ะฟะตัะตะฝะพั

### 11.1. ะัะผะตะฝะฐ ะทะฐะฝััะธั

**ะัะพัะตัั:**

```
1. ะัะบัััั ะทะฐะฝััะธะต ะฒ ัะฐัะฟะธัะฐะฝะธะธ
2. ะะฐะถะฐัั "ะัะผะตะฝะธัั"
3. ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ:
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะัะผะตะฝะธัั ะทะฐะฝััะธะต                       โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
   โ ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั                    โ
   โ 02.12.2024 (ะะฝ) 18:00 - 19:30          โ
   โ ะัะตะฟะพะดะฐะฒะฐัะตะปั: ะะฒะฐะฝะพะฒะฐ ะ.ะ.            โ
   โ ะะฐะฟะธัะฐะฝะพ: 12 ัะตะปะพะฒะตะบ                   โ
   โ                                        โ
   โ ะัะธัะธะฝะฐ ะพัะผะตะฝั:                        โ
   โ [____________________________]         โ
   โ                                        โ
   โ โ ะฃะฒะตะดะพะผะธัั ะบะปะธะตะฝัะพะฒ ะฟะพ email          โ
   โ                                        โ
   โ [ะัะผะตะฝะฐ]  [ะะพะดัะฒะตัะดะธัั ะพัะผะตะฝั]         โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

4. ะะพะดัะฒะตัะถะดะตะฝะธะต:
   โโ ะกัะฐััั โ CANCELLED
   โโ cancellation_reason = ัะตะบัั
   โโ ะะฐะฝััะธะต ะพััะฐะตััั ะฒ ะะ (ะฝะต ัะดะฐะปัะตััั!)
   โโ ะัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธั (ะตัะปะธ ะฒัะฑัะฐะฝะพ)
```

**ะ ัะฐัะฟะธัะฐะฝะธะธ:**
- ะัะผะตะฝะตะฝะฝะพะต ะทะฐะฝััะธะต ะพัะพะฑัะฐะถะฐะตััั ัะตััะผ ั ะฟะตัะตัะตัะบะธะฒะฐะฝะธะตะผ
- ะัะธ ะฝะฐะฒะตะดะตะฝะธะธ ะฟะพะบะฐะทัะฒะฐะตััั ะฟัะธัะธะฝะฐ ะพัะผะตะฝั

### 11.2. ะะตัะตะฝะพั ะทะฐะฝััะธั

**ะัะพัะตัั:**

```
1. ะัะบัััั ะทะฐะฝััะธะต
2. ะะฐะถะฐัั "ะะตัะตะฝะตััะธ"
3. ะคะพัะผะฐ ะฟะตัะตะฝะพัะฐ:
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะะตัะตะฝะตััะธ ะทะฐะฝััะธะต                      โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
   โ ะขะตะบััะตะต:                               โ
   โ 02.12.2024 (ะะฝ) 18:00 - 19:30          โ
   โ ะะฐะป โ1                                 โ
   โ                                        โ
   โ ะะพะฒะพะต:                                 โ
   โ ะะฐัะฐ: [03.12.2024 โผ]                   โ
   โ ะะฐัะฐะปะพ: [18:00]  ะะพะฝะตั: [19:30]        โ
   โ ะะพะผะตัะตะฝะธะต: [ะะฐะป โ1 โผ]                  โ
   โ                                        โ
   โ ะัะธัะธะฝะฐ ะฟะตัะตะฝะพัะฐ:                      โ
   โ [____________________________]         โ
   โ                                        โ
   โ โ ะฃะฒะตะดะพะผะธัั ะบะปะธะตะฝัะพะฒ ะฟะพ email          โ
   โ                                        โ
   โ [ะัะผะตะฝะฐ]  [ะัะพะฒะตัะธัั ะบะพะฝัะปะธะบัั]        โ
   โ           [ะะพะดัะฒะตัะดะธัั ะฟะตัะตะฝะพั]        โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

4. ะัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ ะฝะฐ ะฝะพะฒัั ะดะฐัั/ะฒัะตะผั

5. ะัะปะธ ะะ:
   โโ ะะฑะฝะพะฒะธัั date, start_time, end_time, room_id
   โโ ะะพะฑะฐะฒะธัั ะฟัะธะผะตัะฐะฝะธะต ะพ ะฟะตัะตะฝะพัะต
   โโ ะัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธั

6. ะะพัะตัะฐะตะผะพััั:
   โโ ะะฐะฟะธัะธ ะฒ Attendance ะฟะตัะตะฝะพััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
```

### 11.3. ะะฐะผะตะฝะฐ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั

**ะัะพัะตัั:**

```
1. ะัะบัััั ะทะฐะฝััะธะต
2. ะะฐะถะฐัั "ะะฐะผะตะฝะธัั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั"
3. ะคะพัะผะฐ:
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะะฐะผะตะฝะฐ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั                   โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
   โ ะะฐะฝััะธะต: ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั           โ
   โ 02.12.2024 (ะะฝ) 18:00 - 19:30          โ
   โ                                        โ
   โ ะขะตะบััะธะน: ะะฒะฐะฝะพะฒะฐ ะะฐัะธั ะะตััะพะฒะฝะฐ        โ
   โ                                        โ
   โ ะะฐะผะตะฝะฐ:  [ะัะฑัะฐัั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั โผ]     โ
   โ          ะะตััะพะฒะฐ ะะฝะฝะฐ ะกะตัะณะตะตะฒะฝะฐ        โ
   โ                                        โ
   โ ะัะธัะธะฝะฐ ะทะฐะผะตะฝั:                        โ
   โ [ะะพะปัะฝะธัะฝัะน]                           โ
   โ                                        โ
   โ โ ะฃะฒะตะดะพะผะธัั ะบะปะธะตะฝัะพะฒ                   โ
   โ                                        โ
   โ [ะัะผะตะฝะฐ]  [ะะพะดัะฒะตัะดะธัั ะทะฐะผะตะฝั]         โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

4. ะัะพะฒะตัะบะฐ ะทะฐะฝััะพััะธ ะฝะพะฒะพะณะพ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั

5. ะัะปะธ ะะ:
   โโ teacher_id = ะฝะพะฒัะน ID
   โโ ะะพะฑะฐะฒะธัั ะฟัะธะผะตัะฐะฝะธะต ะพ ะทะฐะผะตะฝะต
   โโ ะฃะฒะตะดะพะผะธัั ะบะปะธะตะฝัะพะฒ
```

### 11.4. ะฃะดะฐะปะตะฝะธะต ะทะฐะฝััะธั

**ะัะฐะฒะธะปะพ:** ะัะปะธ ะฝะฐ ะทะฐะฝััะธะต ะตััั ะทะฐะฟะธัะธ (Attendance), ะฝะตะปัะทั ัะดะฐะปะธัั ัะธะทะธัะตัะบะธ.

**ะัะพัะตัั:**

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะฃะดะฐะปะธัั"

2. ะัะพะฒะตัะบะฐ ะฝะฐะปะธัะธั ะทะฐะฟะธัะตะน:
   SELECT COUNT(*) FROM attendances WHERE schedule_id = :id;

3. ะัะปะธ ะตััั ะทะฐะฟะธัะธ (count > 0):
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ โ๏ธ ะะตะฒะพะทะผะพะถะฝะพ ัะดะฐะปะธัั ะทะฐะฝััะธะต         โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
   โ ะะฐ ััะพ ะทะฐะฝััะธะต ะทะฐะฟะธัะฐะฝะพ 12 ัะตะปะพะฒะตะบ.    โ
   โ                                        โ
   โ ะั ะผะพะถะตัะต ัะพะปัะบะพ ะะขะะะะะขะฌ ะทะฐะฝััะธะต,     โ
   โ ะฝะพ ะฝะต ัะดะฐะปะธัั ะตะณะพ ะฟะพะปะฝะพัััั.           โ
   โ                                        โ
   โ [ะัะผะตะฝะธัั ะทะฐะฝััะธะต]  [ะะฐะบัััั]          โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

4. ะัะปะธ ะะะข ะทะฐะฟะธัะตะน:
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะฃะดะฐะปะธัั ะทะฐะฝััะธะต?                       โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
   โ ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั                    โ
   โ 02.12.2024 (ะะฝ) 18:00 - 19:30          โ
   โ                                        โ
   โ ะญัะพ ะดะตะนััะฒะธะต ะฝะตะพะฑัะฐัะธะผะพ.               โ
   โ                                        โ
   โ [ะัะผะตะฝะฐ]  [ะฃะดะฐะปะธัั]                    โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

5. ะฃะดะฐะปะตะฝะธะต ัะธะทะธัะตัะบะพะน ะทะฐะฟะธัะธ ะธะท ะะ
```

---

## 12. ะฃะฒะตะดะพะผะปะตะฝะธั

### 12.1. ะะพะณะดะฐ ะพัะฟัะฐะฒะปััั

**ะฃะฒะตะดะพะผะปะตะฝะธั ะพัะฟัะฐะฒะปััััั ะฟัะธ:**
1. ะัะผะตะฝะต ะทะฐะฝััะธั
2. ะะตัะตะฝะพัะต ะทะฐะฝััะธั
3. ะะฐะผะตะฝะต ะฟัะตะฟะพะดะฐะฒะฐัะตะปั (ะพะฟัะธะพะฝะฐะปัะฝะพ)

**ะะ ะพัะฟัะฐะฒะปััััั ะฟัะธ:**
- ะกะพะทะดะฐะฝะธะธ ะฝะพะฒะพะณะพ ะทะฐะฝััะธั
- ะะทะผะตะฝะตะฝะธะธ ะฟัะธะผะตัะฐะฝะธะน
- ะะทะผะตะฝะตะฝะธะธ ะฟะพะผะตัะตะฝะธั (ะฑะตะท ะธะทะผะตะฝะตะฝะธั ะฒัะตะผะตะฝะธ)

### 12.2. ะะพะผั ะพัะฟัะฐะฒะปััั

**ะะพะปััะฐัะตะปะธ:**
- ะัะต ะบะปะธะตะฝัั, ะทะฐะฟะธัะฐะฝะฝัะต ะฝะฐ ะทะฐะฝััะธะต (ะตััั ะทะฐะฟะธัั ะฒ Attendance)
- ะฃ ะบะพัะพััั ัะบะฐะทะฐะฝ email ะฒ ะบะฐััะพัะบะต

**SQL:**
```sql
SELECT DISTINCT c.email, c.first_name, c.last_name
FROM clients c
JOIN attendances a ON a.client_id = c.id
WHERE a.schedule_id = :schedule_id
  AND c.email IS NOT NULL
  AND c.email != '';
```

### 12.3. ะจะฐะฑะปะพะฝั ัะฒะตะดะพะผะปะตะฝะธะน

**ะัะผะตะฝะฐ ะทะฐะฝััะธั:**

```
ะขะตะผะฐ: ะัะผะตะฝะฐ ะทะฐะฝััะธั "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั" 02.12.2024

ะะดัะฐะฒััะฒัะนัะต, {firstName}!

ะ ัะพะถะฐะปะตะฝะธั, ะทะฐะฝััะธะต "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั" 02.12.2024 ะฒ 18:00 ะะขะะะะะะ.

ะัะธัะธะฝะฐ: {cancellationReason}

ะัะธะฝะพัะธะผ ะธะทะฒะธะฝะตะฝะธั ะทะฐ ะฝะตัะดะพะฑััะฒะฐ.

ะก ัะฒะฐะถะตะฝะธะตะผ,
ะัะปััััะฝัะน ัะตะฝัั "ะะฐะทะฒะฐะฝะธะต"
ะขะตะปะตัะพะฝ: +7 (999) 123-45-67
```

**ะะตัะตะฝะพั ะทะฐะฝััะธั:**

```
ะขะตะผะฐ: ะะตัะตะฝะพั ะทะฐะฝััะธั "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั"

ะะดัะฐะฒััะฒัะนัะต, {firstName}!

ะะฐะฝััะธะต "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั" ะะะะะะะกะะะ.

ะัะปะพ: 02.12.2024 (ะะฝ) 18:00 - 19:30, ะะฐะป โ1
ะกัะฐะปะพ: 03.12.2024 (ะั) 18:00 - 19:30, ะะฐะป โ1

ะัะธัะธะฝะฐ: {transferReason}

ะะดะตะผ ะฒะฐั ะฝะฐ ะทะฐะฝััะธะธ!

ะก ัะฒะฐะถะตะฝะธะตะผ,
ะัะปััััะฝัะน ัะตะฝัั "ะะฐะทะฒะฐะฝะธะต"
```

**ะะฐะผะตะฝะฐ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั:**

```
ะขะตะผะฐ: ะะฐะผะตะฝะฐ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั ะฝะฐ ะทะฐะฝััะธะธ 02.12.2024

ะะดัะฐะฒััะฒัะนัะต, {firstName}!

ะะฐ ะทะฐะฝััะธะธ "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั" 02.12.2024 ะฒ 18:00 ะฑัะดะตั ะทะฐะผะตะฝะฐ ะฟัะตะฟะพะดะฐะฒะฐัะตะปั.

ะะผะตััะพ: ะะฒะฐะฝะพะฒะฐ ะะฐัะธั ะะตััะพะฒะฝะฐ
ะัะพะฒะตะดะตั: ะะตััะพะฒะฐ ะะฝะฝะฐ ะกะตัะณะตะตะฒะฝะฐ

ะะฐัะฐ, ะฒัะตะผั ะธ ะฟะพะผะตัะตะฝะธะต ะพััะฐัััั ะฟัะตะถะฝะธะผะธ.

ะก ัะฒะฐะถะตะฝะธะตะผ,
ะัะปััััะฝัะน ัะตะฝัั "ะะฐะทะฒะฐะฝะธะต"
```

### 12.4. ะัะฟัะฐะฒะบะฐ

```typescript
async function sendScheduleChangeNotifications(
  scheduleId: string,
  type: 'cancellation' | 'transfer' | 'teacher_change',
  data: any
) {
  // ะะพะปััะธัั ะบะปะธะตะฝัะพะฒ
  const clients = await getClientsForSchedule(scheduleId);

  // ะััะธะปัััะพะฒะฐัั ัะตั, ั ะบะพะณะพ ะตััั email
  const recipients = clients.filter(c => c.email);

  // ะัะฟัะฐะฒะธัั ะบะฐะถะดะพะผั
  for (const client of recipients) {
    const emailContent = renderTemplate(type, {
      firstName: client.firstName,
      ...data,
    });

    await emailService.send({
      to: client.email,
      subject: emailContent.subject,
      body: emailContent.body,
    });
  }

  // ะะพะณะธัะพะฒะฐัั ะพัะฟัะฐะฒะบั
  await prisma.notificationLog.create({
    data: {
      scheduleId,
      type,
      recipientCount: recipients.length,
      sentAt: new Date(),
    },
  });
}
```

---

## 13. ะคะธะปัััั ะธ ะฟัะตะดััะฐะฒะปะตะฝะธั

### 13.1. ะะพัััะฟะฝัะต ัะธะปัััั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะคะธะปัััั ัะฐัะฟะธัะฐะฝะธั                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะพะผะตัะตะฝะธั:                              โ
โ  โ ะัะต ะฟะพะผะตัะตะฝะธั                        โ
โ  โ ะะฐะป โ1                               โ
โ  โ ะะฐะป โ2                               โ
โ  โ ะะปะฐัั โ1                             โ
โ  ...                                    โ
โ                                         โ
โ ะขะธะฟ ัะพะฑััะธั:                            โ
โ  โ ะะฐะฝััะธั ัััะดะธะน                       โ
โ  โ ะัะตะฝะดะฐ                               โ
โ  โ ะะตัะพะฟัะธััะธั                          โ
โ  โ ะขะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ                    โ
โ                                         โ
โ ะะฝะธ ะฝะตะดะตะปะธ:                             โ
โ  โ ะะฝ โ ะั โ ะกั โ ะงั โ ะั โ ะกะฑ โ ะั    โ
โ                                         โ
โ ะัะตะผั:                                  โ
โ  โ ะะตัั ะดะตะฝั                            โ
โ  โ ะฃััะพ (8:00-12:00)                    โ
โ  โ ะะตะฝั (12:00-18:00)                   โ
โ  โ ะะตัะตั (18:00-22:00)                  โ
โ                                         โ
โ ะัะตะฟะพะดะฐะฒะฐัะตะปั:                          โ
โ  [ะัะฑัะฐัั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั โผ]              โ
โ                                         โ
โ ะกััะดะธั/ะััะฟะฟะฐ:                          โ
โ  [ะัะฑัะฐัั ะณััะฟะฟั โผ]                     โ
โ                                         โ
โ [ะกะฑัะพัะธัั]  [ะัะธะผะตะฝะธัั]                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 13.2. ะกะพััะฐะฝะตะฝะฝัะต ะฟัะตะดััะฐะฒะปะตะฝะธั

ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ัะพััะฐะฝะธัั ะฝะฐะฑะพั ัะธะปัััะพะฒ ะบะฐะบ ะฟัะตะดััะฐะฒะปะตะฝะธะต:

**ะัะธะผะตัั:**
- "ะะพะธ ะทะฐะฝััะธั" (ัะธะปััั ะฟะพ ัะตะบััะตะผั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั)
- "ะะฐะป โ1" (ัะพะปัะบะพ ะะฐะป โ1)
- "ะััะพะดะฝัะต" (ัะพะปัะบะพ ะกะฑ, ะั)

---

## 14. ะัะฐะฒะฐ ะดะพัััะฟะฐ

### 14.1. ะะดะผะธะฝะธัััะฐัะพั

**ะะพะถะตั:**
- โ ะกะพะทะดะฐะฒะฐัั ะฒัะต ัะธะฟั ัะพะฑััะธะน
- โ ะะตะดะฐะบัะธัะพะฒะฐัั ะฒัะต ัะพะฑััะธั
- โ ะฃะดะฐะปััั ัะพะฑััะธั
- โ ะัะผะตะฝััั ัะพะฑััะธั
- โ ะะตัะตะฝะพัะธัั ัะพะฑััะธั
- โ ะะพะดัะฒะตัะถะดะฐัั ะทะฐัะฒะบะธ ะฝะฐ ะฐัะตะฝะดั
- โ ะกะพะทะดะฐะฒะฐัั ัะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ
- โ ะัะพัะผะฐััะธะฒะฐัั ะฒัะต ัะฐัะฟะธัะฐะฝะธะต

### 14.2. ะะตะฝะตะดะถะตั

**ะะพะถะตั:**
- โ ะกะพะทะดะฐะฒะฐัั ะทะฐะฝััะธั ัััะดะธะน
- โ ะกะพะทะดะฐะฒะฐัั ะฐัะตะฝะดั (ัะตัะตะท ะทะฐัะฒะบั ะธะปะธ ััะฐะทั ะฟะพะดัะฒะตัะถะดะตะฝะฝัั)
- โ ะะตะดะฐะบัะธัะพะฒะฐัั ัะฒะพะธ ัะพะฑััะธั
- โ ะัะผะตะฝััั ะทะฐะฝััะธั ั ัะฒะตะดะพะผะปะตะฝะธะตะผ
- โ ะะตัะตะฝะพัะธัั ะทะฐะฝััะธั
- โ ะัะพัะผะฐััะธะฒะฐัั ะฒัะต ัะฐัะฟะธัะฐะฝะธะต

**ะะต ะผะพะถะตั:**
- โ ะฃะดะฐะปััั ัะพะฑััะธั
- โ ะกะพะทะดะฐะฒะฐัั ัะตัะฝะธัะตัะบะธะต ะฑัะพะฝะธ
- โ ะะตะดะฐะบัะธัะพะฒะฐัั ััะถะธะต ัะพะฑััะธั

---

## 15. UI/UX ััะตะฑะพะฒะฐะฝะธั

### 15.1. ะกะบะฒะพะทะฝะพะต ัะฐัะฟะธัะฐะฝะธะต (ะณัะธะด)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฐัะฟะธัะฐะฝะธะต   [โ ะัะตะด. ะดะตะฝั] [ะกะตะณะพะดะฝั] [ะกะปะตะด. ะดะตะฝั โถ]   [ะะตะดะตะปั] โ
โ              02 ะดะตะบะฐะฑัั 2024, ะะพะฝะตะดะตะปัะฝะธะบ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะคะธะปัััั: [ะะพะผะตัะตะฝะธั โผ] [ะขะธะฟ ัะพะฑััะธั โผ] [ะัะตะฟะพะดะฐะฒะฐัะตะปั โผ]        โ
โโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโโโโโค
โ        โ 09:00  โ 10:00  โ 11:00  โ 12:00  โ 13:00  โ ...        โ
โโโโโโโโโโผโโโโโโโโโผโโโโโโโโโผโโโโโโโโโผโโโโโโโโโผโโโโโโโโโผโโโโโโโโโโโโโค
โ ะะฐะป โ1 โ [ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั    ]โ        โ [ะขะฐะฝัั          ]  โ
โ        โ ๐ค ะะฒะฐะฝะพะฒะฐ ะ.ะ.         โ        โ ๐ค ะะตััะพะฒ ะ.ะก.     โ
โ        โ ๐ฅ 12 ัะตะป.              โ        โ ๐ฅ 8 ัะตะป.          โ
โโโโโโโโโโผโโโโโโโโโดโโโโโโโโโดโโโโโโโโโผโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโค
โ ะะฐะป โ2 โ         โ [ะัะตะฝะดะฐ: ะะตะฝั ัะพะถะดะตะฝะธั        ]โ              โ
โ        โ         โ ๐ +7999123456                โ              โ
โ        โ         โ ๐ฐ ะะฟะปะฐัะตะฝะฐ                   โ              โ
โโโโโโโโโโผโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโดโโโโโโโโโฌโโโโโโโดโโโโโโโโโโโโโโโค
โะะปะฐััโ1 โ [ะะฝะณะป.]โ        โ [ะัะทัะบะฐ      ]  โ                    โ
โ        โ๐ค ะกะธะดะพัโ        โ ๐ค ะะฒะฐะฝะพะฒะฐ ะ.   โ                    โ
โโโโโโโโโโดโโโโโโโโโดโโโโโโโโโดโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโ

  [+ ะะพะฒะพะต ะทะฐะฝััะธะต]  [+ ะัะตะฝะดะฐ]  [+ ะะตัะพะฟัะธััะธะต]  [+ ะขะตั. ะฑัะพะฝั]
```

### 15.2. ะะตัะฐะปะธ ัะพะฑััะธั (ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ)

ะัะธ ะบะปะธะบะต ะฝะฐ ัะพะฑััะธะต:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั            [ร ]    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ 02.12.2024 (ะะพะฝะตะดะตะปัะฝะธะบ)            โ
โ โฐ 18:00 - 19:30                        โ
โ ๐ ะะฐะป โ1                              โ
โ ๐ค ะัะตะฟะพะดะฐะฒะฐัะตะปั: ะะฒะฐะฝะพะฒะฐ ะ.ะ.         โ
โ ๐ฅ ะะฐะฟะธัะฐะฝะพ: 12 ัะตะปะพะฒะตะบ                โ
โ ๐ ะััะฟะฟะฐ: ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั         โ
โ                                        โ
โ ะกัะฐััั: ะะฐะฟะปะฐะฝะธัะพะฒะฐะฝะพ                  โ
โ                                        โ
โ ะัะธะผะตัะฐะฝะธั:                            โ
โ ะัะธะฝะตััะธ ะบะพะฒัะธะบะธ                       โ
โ                                        โ
โ [ะะฐะฟะธัะฐัั ะบะปะธะตะฝัะฐ]  [ะัะผะตัะธัั ะฟะพัะตั.]  โ
โ                                        โ
โ [ะะตะดะฐะบัะธัะพะฒะฐัั]  [ะะตัะตะฝะตััะธ]  [ะัะผะตะฝะธัั]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 16. ะะทะฐะธะผะพะดะตะนััะฒะธะต ั ะดััะณะธะผะธ ะผะพะดัะปัะผะธ

### 16.1. ะะพะดัะปั "ะกััะดะธะธ ะธ ัะตะบัะธะธ"

**ะกะฒัะทั:** Schedule โ Group โ Studio

**ะัะฟะพะปัะทัะตััั ะดะปั:**
- ะกะพะทะดะฐะฝะธะต ะทะฐะฝััะธะน ะดะปั ะณััะฟะฟั
- ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ััะฐััะฝะธะบะพะฒ ะณััะฟะฟั
- ะะฟัะตะดะตะปะตะฝะธะต ะฟัะตะฟะพะดะฐะฒะฐัะตะปั ะธ ะฟะพะผะตัะตะฝะธั ะฟะพ ัะผะพะปัะฐะฝะธั

### 16.2. ะะพะดัะปั "ะะพัะตัะฐะตะผะพััั"

**ะกะฒัะทั:** Schedule โ Attendance โ Client

**ะัะฟะพะปัะทัะตััั ะดะปั:**
- ะัะผะตัะบะฐ ะฟัะธัััััะฒะธั ะฝะฐ ะทะฐะฝััะธะธ
- ะะพะดััะตั ะบะพะปะธัะตััะฒะฐ ะทะฐะฟะธัะฐะฝะฝัั
- ะกะฟะธัะฐะฝะธะต ั ะฐะฑะพะฝะตะผะตะฝัะฐ

### 16.3. ะะพะดัะปั "ะะปะฐัะตะถะธ"

**ะกะฒัะทั:** Rental โ Payment

**ะัะฟะพะปัะทัะตััั ะดะปั:**
- ะะฟะปะฐัะฐ ะฐัะตะฝะดั
- ะะพะทะฒัะฐั ััะตะดััะฒ ะฟัะธ ะพัะผะตะฝะต

### 16.4. ะะพะดัะปั "ะััะตัั"

**ะัะฟะพะปัะทัะตััั ะฒ ะพััะตัะฐั:**
- ะะฐะณััะทะบะฐ ะฟะพะผะตัะตะฝะธะน
- ะะพะปะธัะตััะฒะพ ะทะฐะฝััะธะน ะฟะพ ะฟัะตะฟะพะดะฐะฒะฐัะตะปัะผ
- ะะพัะพะดะฝะพััั ะพั ะฐัะตะฝะดั

### 16.5. ะะพะดัะปั "ะะฑะพะฝะตะผะตะฝัั"

**๐ ะกะผ. ะฟะพะปะฝัั ัะฟะตัะธัะธะบะฐัะธั:** [modules/03_SUBSCRIPTION_MODULE.md](../modules/03_SUBSCRIPTION_MODULE.md)

**ะกะฒัะทั:** Schedule โ Group โ Subscription โ Client

**ะัะธัะธัะตัะบะพะต ะฒะทะฐะธะผะพะดะตะนััะฒะธะต:**

#### ะัะพะฒะตัะบะฐ ะฐะฑะพะฝะตะผะตะฝัะพะฒ ะฟัะธ ะทะฐะฟะธัะธ ะฝะฐ ะทะฐะฝััะธะต

ะัะธ ะทะฐะฟะธัะธ ะบะปะธะตะฝัะฐ ะฝะฐ ะทะฐะฝััะธะต ัะธััะตะผะฐ ะดะพะปะถะฝะฐ ะฟัะพะฒะตัะธัั ะฝะฐะปะธัะธะต **ะฐะบัะธะฒะฝะพะณะพ ะฐะฑะพะฝะตะผะตะฝัะฐ** ะดะปั ะดะฐะฝะฝะพะน ะณััะฟะฟั:

```typescript
async function enrollClientToSchedule(
  clientId: string,
  scheduleId: string,
): Promise<void> {
  const schedule = await getSchedule(scheduleId);

  // 1. ะัะพะฒะตัะธัั ะฝะฐะปะธัะธะต ะฐะบัะธะฒะฝะพะณะพ ะฐะฑะพะฝะตะผะตะฝัะฐ
  const subscription = await getActiveSubscription(clientId, schedule.groupId);

  if (!subscription) {
    throw new Error('ะฃ ะบะปะธะตะฝัะฐ ะฝะตั ะฐะบัะธะฒะฝะพะณะพ ะฐะฑะพะฝะตะผะตะฝัะฐ ะดะปั ััะพะน ะณััะฟะฟั');
  }

  // 2. ะัะพะฒะตัะธัั ะฒะฐะปะธะดะฝะพััั ะฐะฑะพะฝะตะผะตะฝัะฐ (ะบะฐะปะตะฝะดะฐัะฝัะน ะผะตััั)
  const scheduleMonth = format(schedule.date, 'yyyy-MM');
  if (subscription.validMonth !== scheduleMonth) {
    throw new Error(
      `ะะฑะพะฝะตะผะตะฝั ะดะตะนััะฒัะตั ะฝะฐ ${subscription.validMonth}, ะฐ ะทะฐะฝััะธะต ะฒ ${scheduleMonth}`
    );
  }

  // 3. ะัะพะฒะตัะธัั ะพััะฐัะพะบ ะฟะพัะตัะตะฝะธะน (ะดะปั ัะฐะทะพะฒัั ะฐะฑะพะฝะตะผะตะฝัะพะฒ)
  if (subscription.type === 'SINGLE_VISIT' && subscription.remainingVisits === 0) {
    throw new Error('ะฃ ะบะปะธะตะฝัะฐ ะทะฐะบะพะฝัะธะปะธัั ะฟะพัะตัะตะฝะธั ะฟะพ ะฐะฑะพะฝะตะผะตะฝัั');
  }

  // 4. ะกะพะทะดะฐัั ะทะฐะฟะธัั ะฟะพัะตัะตะฝะธั
  await createAttendance({
    scheduleId,
    clientId,
    status: 'PRESENT',
  });

  // 5. ะกะฟะธัะฐัั ะฟะพัะตัะตะฝะธะต (ะตัะปะธ ัะฐะทะพะฒัะน ะฐะฑะพะฝะตะผะตะฝั)
  if (subscription.type === 'SINGLE_VISIT') {
    await updateSubscription(subscription.id, {
      remainingVisits: subscription.remainingVisits - 1,
    });
  }
}
```

#### ะะฐััะตั ะบะพะปะธัะตััะฒะฐ ะทะฐะฝััะธะน ะฒ ะผะตัััะต

ะัะธ ะฟัะพะดะฐะถะต ะฐะฑะพะฝะตะผะตะฝัะฐ ะธะปะธ ัะพะทะดะฐะฝะธะธ ะบะพะผะฟะตะฝัะฐัะธะธ ะฝัะถะฝะพ **ะฟะพะดััะธัะฐัั ะบะพะปะธัะตััะฒะพ ะทะฐะฝััะธะน ะณััะฟะฟั ะฒ ะบะพะฝะบัะตัะฝะพะผ ะผะตัััะต**:

```typescript
async function countClassesInMonth(
  groupId: string,
  validMonth: string, // "2025-11"
): Promise<number> {
  const [year, month] = validMonth.split('-').map(Number);
  const startDate = new Date(year, month - 1, 1);
  const endDate = new Date(year, month, 0);

  const count = await prisma.schedule.count({
    where: {
      groupId,
      date: {
        gte: startDate,
        lte: endDate,
      },
      status: 'SCHEDULED',
    },
  });

  return count;
}
```

**ะัะฟะพะปัะทัะตััั ะฒ:**
- ะัะพะฒะตัะบะฐ ะผะธะฝะธะผัะผะฐ 3 ะทะฐะฝััะธะน ะฟัะธ ะฟะพะบัะฟะบะต ะฐะฑะพะฝะตะผะตะฝัะฐ
- ะะฐััะตั ะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพะน ัะตะฝั
- ะะฐััะตั ะบะพะผะฟะตะฝัะฐัะธะธ ะทะฐ ะฟัะพะฟััะตะฝะฝัะต ะทะฐะฝััะธั

#### ะะฐะปะธะดะฐัะธั ะฟัะธ ะฟะพะบัะฟะบะต ะฐะฑะพะฝะตะผะตะฝัะฐ

ะะพะดัะปั ะฐะฑะพะฝะตะผะตะฝัะพะฒ ะพะฑัะฐัะฐะตััั ะบ ะผะพะดัะปั ัะฐัะฟะธัะฐะฝะธั ะดะปั ะฟัะพะฒะตัะบะธ **ะผะธะฝะธะผะฐะปัะฝะพะณะพ ะบะพะปะธัะตััะฒะฐ ะพััะฐะฒัะธััั ะทะฐะฝััะธะน**:

```typescript
async function canPurchaseSubscription(
  groupId: string,
  purchaseDate: Date,
  validMonth: string,
): Promise<{ canPurchase: boolean; remainingClasses: number; message?: string }> {
  const [year, month] = validMonth.split('-').map(Number);
  const lastDay = new Date(year, month, 0);

  // ะะพะปััะธัั ะฒัะต ะทะฐะฝััะธั ะณััะฟะฟั ั purchaseDate ะดะพ ะบะพะฝัะฐ ะผะตัััะฐ
  const schedules = await prisma.schedule.findMany({
    where: {
      groupId,
      date: {
        gte: purchaseDate,
        lte: lastDay,
      },
      status: 'SCHEDULED',
    },
  });

  const remainingClasses = schedules.length;

  if (remainingClasses < 3) {
    return {
      canPurchase: false,
      remainingClasses,
      message: `ะะพ ะบะพะฝัะฐ ะผะตัััะฐ ะพััะฐะปะพัั ัะพะปัะบะพ ${remainingClasses} ะทะฐะฝััะธะน. ะะธะฝะธะผัะผ ะดะปั ะฟะพะบัะฟะบะธ ะฐะฑะพะฝะตะผะตะฝัะฐ: 3 ะทะฐะฝััะธั.`,
    };
  }

  return {
    canPurchase: true,
    remainingClasses,
  };
}
```

#### ะัะธะฒัะทะบะฐ ะฐะฑะพะฝะตะผะตะฝัะฐ ะบ ะณััะฟะฟะต (ะฝะต ัััะดะธะธ)

**ะะฐะถะฝะพ:** ะะฑะพะฝะตะผะตะฝัั ะฟัะธะฒัะทะฐะฝั ะบ **ะบะพะฝะบัะตัะฝะพะน ะณััะฟะฟะต**, ะฐ ะฝะต ะบ ัััะดะธะธ.

**ะัะธะผะตั ััััะบัััั:**
```
ะกััะดะธั: "ะะพะณะฐ"
โโ ะััะฟะฟะฐ 1: "ะะพะณะฐ - ะะฐัะธะฝะฐััะธะต" (2 ัะฐะทะฐ ะฒ ะฝะตะดะตะปั, 8 ะทะฐะฝััะธะน/ะผะตััั, 3000 ััะฑ.)
โโ ะััะฟะฟะฐ 2: "ะะพะณะฐ - ะัะพะดะฒะธะฝัััะต" (3 ัะฐะทะฐ ะฒ ะฝะตะดะตะปั, 12 ะทะฐะฝััะธะน/ะผะตััั, 5000 ััะฑ.)
โโ ะััะฟะฟะฐ 3: "ะะพะณะฐ - ะะฝะดะธะฒะธะดัะฐะปัะฝัะต" (ะฟะพ ะดะพะณะพะฒะพัะตะฝะฝะพััะธ)
```

**ะะปะธะตะฝั ะฟะพะบัะฟะฐะตั ะฐะฑะพะฝะตะผะตะฝั ะฝะฐ "ะะพะณะฐ - ะะฐัะธะฝะฐััะธะต" ะธ ะผะพะถะตั ะฟะพัะตัะฐัั ัะพะปัะบะพ ะทะฐะฝััะธั ััะพะน ะณััะฟะฟั.**

#### ะะพะผะฟะตะฝัะฐัะธะธ ะทะฐ ะฟัะพะฟััะตะฝะฝัะต ะทะฐะฝััะธั

ะะพะดัะปั ัะฐัะฟะธัะฐะฝะธั ะฟัะตะดะพััะฐะฒะปัะตั ะดะฐะฝะฝัะต ะดะปั ัะฐััะตัะฐ ะบะพะผะฟะตะฝัะฐัะธะธ:

```typescript
async function calculateCompensation(
  subscriptionId: string,
  missedClasses: number,
): Promise<number> {
  const subscription = await getSubscription(subscriptionId);

  // ะะพะปััะธัั ะบะพะปะธัะตััะฒะพ ะทะฐะฝััะธะน ะฒ ะผะตัััะต ะฐะฑะพะฝะตะผะตะฝัะฐ
  const totalClasses = await countClassesInMonth(
    subscription.groupId,
    subscription.validMonth,
  );

  if (totalClasses === 0) {
    throw new Error('ะ ััะพะผ ะผะตัััะต ะฝะตั ะทะฐะฝััะธะน ะดะปั ััะพะน ะณััะฟะฟั');
  }

  // ะะฐัััะธัะฐัั ััะพะธะผะพััั ะพะดะฝะพะณะพ ะทะฐะฝััะธั
  const pricePerClass = subscription.paidPrice / totalClasses;

  // ะะฐัััะธัะฐัั ะบะพะผะฟะตะฝัะฐัะธั
  const compensationAmount = Math.round(pricePerClass * missedClasses);

  return compensationAmount;
}
```

**ะคะพัะผัะปะฐ ะบะพะผะฟะตะฝัะฐัะธะธ:**
```
ะกัะพะธะผะพััั 1 ะทะฐะฝััะธั = ะะฟะปะฐัะตะฝะฝะฐั ัะตะฝะฐ ะฐะฑะพะฝะตะผะตะฝัะฐ / ะะพะปะธัะตััะฒะพ ะทะฐะฝััะธะน ะฒ ะผะตัััะต
ะะพะผะฟะตะฝัะฐัะธั = ะกัะพะธะผะพััั 1 ะทะฐะฝััะธั ร ะะพะปะธัะตััะฒะพ ะฟัะพะฟััะตะฝะฝัั ะทะฐะฝััะธะน
```

**ะัะธะผะตั:**
- ะะฑะพะฝะตะผะตะฝั: 5000 ััะฑ. (ะฟะพะปะฝัะน ะผะตััั, 12 ะทะฐะฝััะธะน)
- ะัะพะฟััะตะฝะพ: 3 ะทะฐะฝััะธั
- ะะพะผะฟะตะฝัะฐัะธั: (5000 / 12) ร 3 = 1250 ััะฑ.

#### ะะฐะปะตะฝะดะฐัะฝะฐั ัะธััะตะผะฐ ะฐะฑะพะฝะตะผะตะฝัะพะฒ

**ะะปััะตะฒะฐั ะพัะพะฑะตะฝะฝะพััั:** ะะฑะพะฝะตะผะตะฝัั ะดะตะนััะฒััั ะฝะฐ **ะบะพะฝะบัะตัะฝัะน ะบะฐะปะตะฝะดะฐัะฝัะน ะผะตััั**, ะฐ ะฝะต ะฝะฐ 30 ะดะฝะตะน ั ะผะพะผะตะฝัะฐ ะฟะพะบัะฟะบะธ.

**ะะปะธัะฝะธะต ะฝะฐ ัะฐัะฟะธัะฐะฝะธะต:**
1. ะัะธ ัะพะทะดะฐะฝะธะธ ัะฐัะฟะธัะฐะฝะธั ะฝะฐ ัะปะตะดัััะธะน ะผะตััั ะฝัะถะฝะพ ััะธััะฒะฐัั, ััะพ ะฐะฑะพะฝะตะผะตะฝัั ัะตะบััะตะณะพ ะผะตัััะฐ ะธััะตะบัั ะฒ ะบะพะฝัะต ะผะตัััะฐ
2. ะะปะธะตะฝัั ะดะพะปะถะฝั ะฟัะพะดะปะธัั ะฐะฑะพะฝะตะผะตะฝั ะฝะฐ ัะปะตะดัััะธะน ะผะตััั
3. ะะฒัะพะผะฐัะธัะตัะบะพะต ะธััะตัะตะฝะธะต ะฐะฑะพะฝะตะผะตะฝัะพะฒ ะฟัะพะธััะพะดะธั ะฒ ะบะพะฝัะต ะบะฐะถะดะพะณะพ ะผะตัััะฐ (cron job)

**ะัะธะผะตั:**
```
ะะฑะพะฝะตะผะตะฝั: ะะพัะฑัั 2025 (validMonth = "2025-11")
ะะตัะธะพะด ะดะตะนััะฒะธั: 15.11.2025 - 30.11.2025

ะะฐะฝััะธั ะณััะฟะฟั ะฒ ะฝะพัะฑัะต:
- 16.11.2025 โ (ะผะพะถะตั ะฟะพัะตัะธัั)
- 18.11.2025 โ (ะผะพะถะตั ะฟะพัะตัะธัั)
- 23.11.2025 โ (ะผะพะถะตั ะฟะพัะตัะธัั)
- 25.11.2025 โ (ะผะพะถะตั ะฟะพัะตัะธัั)
- 30.11.2025 โ (ะผะพะถะตั ะฟะพัะตัะธัั)

ะะฐะฝััะธั ะณััะฟะฟั ะฒ ะดะตะบะฐะฑัะต:
- 02.12.2025 โ (ะฝะต ะผะพะถะตั ะฟะพัะตัะธัั - ะฝัะถะตะฝ ะฐะฑะพะฝะตะผะตะฝั ะฝะฐ ะดะตะบะฐะฑัั)
```

#### ะกัะฐัััั ะฐะฑะพะฝะตะผะตะฝัะพะฒ

ะัะธ ะฒะทะฐะธะผะพะดะตะนััะฒะธะธ ั ะผะพะดัะปะตะผ ัะฐัะฟะธัะฐะฝะธั ััะธััะฒะฐัััั ัะปะตะดัััะธะต ััะฐัััั:

- **ACTIVE** - ะะฑะพะฝะตะผะตะฝั ะฐะบัะธะฒะตะฝ, ะบะปะธะตะฝั ะผะพะถะตั ะทะฐะฟะธััะฒะฐัััั ะฝะฐ ะทะฐะฝััะธั
- **EXPIRED** - ะะฑะพะฝะตะผะตะฝั ะธััะตะบ, ะบะปะธะตะฝั ะะ ะผะพะถะตั ะทะฐะฟะธััะฒะฐัััั
- **FROZEN** - ะะฑะพะฝะตะผะตะฝั ะทะฐะผะพัะพะถะตะฝ, ะบะปะธะตะฝั ะะ ะผะพะถะตั ะทะฐะฟะธััะฒะฐัััั
- **COMPENSATED** - ะะฑะพะฝะตะผะตะฝั ะบะพะผะฟะตะฝัะธัะพะฒะฐะฝ, ััะธััะฒะฐะตััั ะฒ ัะธะฝะฐะฝัะพะฒะพะน ะพััะตัะฝะพััะธ

#### ะฃะฒะตะดะพะผะปะตะฝะธั ะพะฑ ะธััะตัะตะฝะธะธ ะฐะฑะพะฝะตะผะตะฝัะฐ

ะะพะดัะปั ัะฐัะฟะธัะฐะฝะธั ะผะพะถะตั ััะธะณะณะตัะธัั ัะฒะตะดะพะผะปะตะฝะธั ะพะฑ ะธััะตัะตะฝะธะธ:

**ะะฐ 3 ะดะฝั ะดะพ ะบะพะฝัะฐ ะผะตัััะฐ:**
```typescript
async function notifyExpiringSubscriptions() {
  const today = new Date();
  const in3Days = new Date(today);
  in3Days.setDate(today.getDate() + 3);

  // ะะฐะนัะธ ะฐะฑะพะฝะตะผะตะฝัั, ะบะพัะพััะต ะธััะตะบะฐัั ัะตัะตะท 3 ะดะฝั
  const expiringSubscriptions = await prisma.subscription.findMany({
    where: {
      status: 'ACTIVE',
      endDate: in3Days,
    },
    include: {
      client: true,
      group: {
        include: {
          studio: true,
        },
      },
    },
  });

  for (const subscription of expiringSubscriptions) {
    // ะัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต ะบะปะธะตะฝัั
    await sendNotification(subscription.client, {
      subject: 'ะะฐั ะฐะฑะพะฝะตะผะตะฝั ัะบะพัะพ ะธััะตัะตั',
      body: `
        ะะฐั ะฐะฑะพะฝะตะผะตะฝั "${subscription.group.studio.name} - ${subscription.group.name}"
        ะดะตะนััะฒัะตั ะดะพ ${format(subscription.endDate, 'dd.MM.yyyy')}.

        ะัะพะดะปะธัะต ะฐะฑะพะฝะตะผะตะฝั, ััะพะฑั ะฟัะพะดะพะปะถะธัั ะฟะพัะตัะฐัั ะทะฐะฝััะธั ะฒ ัะปะตะดัััะตะผ ะผะตัััะต!
      `,
    });
  }
}
```

---

## 17. API Endpoints

### 17.1. ะะฐัะฟะธัะฐะฝะธะต ะทะฐะฝััะธะน

#### GET /api/schedule

ะะพะปััะธัั ัะฐัะฟะธัะฐะฝะธะต ั ัะธะปัััะฐะผะธ

**Query Parameters:**

```typescript
{
  date?: string; // ISO date
  dateFrom?: string;
  dateTo?: string;
  roomIds?: string[]; // ะผะฐััะธะฒ ID ะฟะพะผะตัะตะฝะธะน
  teacherId?: string;
  groupId?: string;
  type?: 'group' | 'individual';
  status?: 'scheduled' | 'completed' | 'cancelled';
}
```

**Response:**

```json
{
  "schedules": [
    {
      "id": "uuid",
      "groupId": "uuid",
      "teacherId": "uuid",
      "roomId": "uuid",
      "date": "2024-12-02",
      "startTime": "18:00:00",
      "endTime": "19:30:00",
      "type": "group",
      "status": "scheduled",
      "group": {
        "id": "uuid",
        "name": "ะะพะณะฐ ะดะปั ะฝะฐัะธะฝะฐััะธั",
        "studio": {
          "name": "ะะพะณะฐ"
        }
      },
      "teacher": {
        "id": "uuid",
        "firstName": "ะะฐัะธั",
        "lastName": "ะะฒะฐะฝะพะฒะฐ"
      },
      "room": {
        "id": "uuid",
        "name": "ะะฐะป โ1"
      },
      "attendanceCount": 12
    }
  ],
  "rentals": [...],
  "events": [...],
  "technicalBlocks": [...]
}
```

#### POST /api/schedule

ะกะพะทะดะฐัั ะทะฐะฝััะธะต

**Request Body:**

```json
{
  "groupId": "uuid", // ะธะปะธ null ะดะปั ะธะฝะดะธะฒะธะดัะฐะปัะฝะพะณะพ
  "teacherId": "uuid",
  "roomId": "uuid",
  "date": "2024-12-02",
  "startTime": "18:00",
  "endTime": "19:30",
  "type": "group",
  "notes": "ะัะธะผะตัะฐะฝะธะต"
}
```

#### POST /api/schedule/recurring

ะกะพะทะดะฐัั ะฟะพะฒัะพััััะตะตัั ะทะฐะฝััะธะต

**Request Body:**

```json
{
  "groupId": "uuid",
  "teacherId": "uuid",
  "roomId": "uuid",
  "startTime": "18:00",
  "endTime": "19:30",
  "recurrenceRule": {
    "daysOfWeek": [1, 3, 5], // ะะฝ, ะกั, ะั (0=ะั, 1=ะะฝ, ..., 6=ะกะฑ)
    "startDate": "2024-12-01",
    "endDate": "2024-12-31"
  }
}
```

**Response:**

```json
{
  "parentScheduleId": "uuid",
  "createdCount": 13,
  "conflicts": []
}
```

#### PATCH /api/schedule/:id

ะะตะดะฐะบัะธัะพะฒะฐัั ะทะฐะฝััะธะต

**Request Body:**

```json
{
  "applyTo": "single" | "future", // ัะพะปัะบะพ ััะพ ะธะปะธ ะฒัะต ะฑัะดััะธะต
  "date": "2024-12-03",
  "startTime": "19:00",
  "endTime": "20:30",
  "roomId": "uuid",
  "teacherId": "uuid"
}
```

#### DELETE /api/schedule/:id

ะฃะดะฐะปะธัั ะทะฐะฝััะธะต

**Query:** `?applyTo=single|future|all`

#### POST /api/schedule/:id/cancel

ะัะผะตะฝะธัั ะทะฐะฝััะธะต

**Request Body:**

```json
{
  "reason": "ะะพะปัะฝะธัะฝัะน ะฟัะตะฟะพะดะฐะฒะฐัะตะปั",
  "notifyClients": true
}
```

### 17.2. ะัะตะฝะดะฐ

#### POST /api/rentals

ะกะพะทะดะฐัั ะฐัะตะฝะดั

**Request Body:**

```json
{
  "roomId": "uuid",
  "clientName": "ะะฒะฐะฝ ะะฒะฐะฝะพะฒ",
  "clientPhone": "+79991234567",
  "clientEmail": "ivan@mail.ru",
  "eventType": "ะะตะฝั ัะพะถะดะตะฝะธั",
  "date": "2024-12-20",
  "startTime": "18:00",
  "endTime": "21:00",
  "expectedGuests": 30,
  "additionalServices": "ะัะพะตะบัะพั, ะผะธะบัะพัะพะฝั",
  "totalPrice": 7000,
  "status": "confirmed" // ะธะปะธ "request"
}
```

#### PATCH /api/rentals/:id/cancel

ะัะผะตะฝะธัั ะฐัะตะฝะดั

**Request Body:**

```json
{
  "reason": "ะะทะผะตะฝะธะปะธัั ะฟะปะฐะฝั",
  "refundAmount": 8000 // ัะฐัััะธััะฒะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
}
```

---

## ะะพะฝะตั ะดะพะบัะผะตะฝัะฐ

**ะกะปะตะดัััะธะต ัะฐะณะธ:**

1. ะฃัะฒะตัะถะดะตะฝะธะต ัะฟะตัะธัะธะบะฐัะธะธ ะผะพะดัะปั ะะฐัะฟะธัะฐะฝะธั
2. ะะตัะตัะพะด ะบ ะผะพะดัะปั "ะกััะดะธะธ ะธ ัะตะบัะธะธ"

---

## 18. ะะพะดัะปั ะะปะฐะฝะธัะพะฒัะธะบะฐ ัะฐัะฟะธัะฐะฝะธั

**๐ ะกะผ. ะฟะพะดัะพะฑะฝัั ะดะพะบัะผะตะฝัะฐัะธั:** [ะะพะดัะปั 8: ะะปะฐะฝะธัะพะฒัะธะบ ัะฐัะฟะธัะฐะฝะธั](./08_SCHEDULE_PLANNER_MODULE.md)

ะะพะดัะปั ะะปะฐะฝะธัะพะฒัะธะบะฐ ัะฐัะฟะธัะฐะฝะธั ัะฐััะธััะตั ะฑะฐะทะพะฒัะน ะผะพะดัะปั ัะฐัะฟะธัะฐะฝะธั ะธ ะฟัะตะดะพััะฐะฒะปัะตั:

### ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

**ะกะพะทะดะฐะฝะธะต ะฟะพะฒัะพััััะธััั ะทะฐะฝััะธะน:**
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ัะตัะธะธ ะทะฐะฝััะธะน ะฝะฐ ะฟะตัะธะพะด (ะผะตััั/ัะตะผะตััั)
- ะัะฑะพั ะดะฝะตะน ะฝะตะดะตะปะธ, ะฒัะตะผะตะฝะธ, ะฟัะตะฟะพะดะฐะฒะฐัะตะปั, ะฟะพะผะตัะตะฝะธั
- ะะธะทัะฐะปัะฝัะน ะฟัะตะดะฟัะพัะผะพัั ั ะบะฐะปะตะฝะดะฐัะตะผ
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะบะพะฝัะปะธะบัะพะฒ ั ะฟัะพะฟััะบะพะผ ะบะพะฝัะปะธะบััััะธั ะดะฐั
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะทะฐะฟะธัั ะบะปะธะตะฝัะพะฒ ะณััะฟะฟั ั ะฐะบัะธะฒะฝัะผะธ ะฐะฑะพะฝะตะผะตะฝัะฐะผะธ

**ะะฐััะพะฒะพะต ัะฟัะฐะฒะปะตะฝะธะต:**
- ะะฐััะพะฒะพะต ะธะทะผะตะฝะตะฝะธะต ะฒัะตะผะตะฝะธ, ะฟะพะผะตัะตะฝะธั, ะฟัะตะฟะพะดะฐะฒะฐัะตะปั ะดะปั ะฝะตัะบะพะปัะบะธั ะทะฐะฝััะธะน
- ะะพะฟะธัะพะฒะฐะฝะธะต ัะฐัะฟะธัะฐะฝะธั ะผะตะถะดั ะณััะฟะฟะฐะผะธ ะธะปะธ ะฟะตัะธะพะดะฐะผะธ
- ะะฐััะพะฒะฐั ะพัะผะตะฝะฐ/ะฟะตัะตะฝะพั ะทะฐะฝััะธะน
- ะฃะฒะตะดะพะผะปะตะฝะธั ะบะปะธะตะฝัะพะฒ ะพะฑ ะธะทะผะตะฝะตะฝะธัั

**ะะฝัะตะณัะฐัะธั:**
- ะัะพะฒะตัะบะฐ ะฐะบัะธะฒะฝัั ะฐะฑะพะฝะตะผะตะฝัะพะฒ ะฟะตัะตะด ะฐะฒัะพะทะฐะฟะธััั ะบะปะธะตะฝัะพะฒ
- ะะฐะปะธะดะฐัะธั validMonth ะฐะฑะพะฝะตะผะตะฝัะฐ ั ะผะตัััะตะผ ะทะฐะฝััะธั
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะทะฐะฟะธัะตะน Attendance

### ะัะตะธะผััะตััะฒะฐ

- โฑ๏ธ ะกะพะบัะฐัะตะฝะธะต ะฒัะตะผะตะฝะธ ะฟะปะฐะฝะธัะพะฒะฐะฝะธั ั 30 ะผะธะฝัั ะดะพ 2 ะผะธะฝัั
- ๐ ะัะตะดะพัะฒัะฐัะตะฝะธะต ะพัะธะฑะพะบ ะฟะปะฐะฝะธัะพะฒะฐะฝะธั ัะตัะตะท ะฒะธะทัะฐะปัะฝัะน ะฟัะตะดะฟัะพัะผะพัั
- ๐ค ะะฒัะพะผะฐัะธะทะฐัะธั ัััะธะฝะฝัั ะพะฟะตัะฐัะธะน
- ๐ง ะะฒัะพะผะฐัะธัะตัะบะธะต ัะฒะตะดะพะผะปะตะฝะธั ะบะปะธะตะฝัะพะฒ
- โ ะะฐัะฐะฝัะธัะพะฒะฐะฝะฝะฐั ะบะพะฝัะธััะตะฝัะฝะพััั ะดะฐะฝะฝัั

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
ะะปั ัะพะทะดะฐะฝะธั ะธ ัะฟัะฐะฒะปะตะฝะธั ัะฐัะฟะธัะฐะฝะธะตะผ ะทะฐะฝััะธะน ัะตะบะพะผะตะฝะดัะตััั ะธัะฟะพะปัะทะพะฒะฐัั ะะพะดัะปั ะะปะฐะฝะธัะพะฒัะธะบะฐ ะฒะผะตััะพ ัััะฝะพะณะพ ัะพะทะดะฐะฝะธั ัะตัะตะท ะฑะฐะทะพะฒัะน ะผะพะดัะปั ัะฐัะฟะธัะฐะฝะธั.

---

**ะะฐัะฐ ะฟะพัะปะตะดะฝะตะณะพ ะพะฑะฝะพะฒะปะตะฝะธั:** 2025-11-15
